{"version":3,"file":"ui.mjs","sources":["../src/ui/Button.tsx","../src/ui/ClientSideOnly.tsx","../src/ui/inPortal.tsx","../src/ui/Progress.tsx","../src/ui/assets/ellipse.svg","../src/ui/DashboardTemplate.tsx","../src/ui/TxBatchViewer.tsx","../src/ui/TxBatchUI.tsx","../src/ui/CapoDappProvider.tsx","../src/ui/CharterStatus.tsx","../src/ui/PendingTxn.tsx","../src/ui/ShowFailedActivity.tsx"],"sourcesContent":["import React, { type MouseEventHandler } from \"react\";\nimport clsx from \"clsx\";\n\nconst styles = {\n    primary: {\n        className:\n            \"not-prose rounded-md bg-blue-700 py-2 px-4 \" +\n            \"text-sm font-semibold text-slate-900 \" +\n            \"border border-solid border-blue-600/66 \" +\n            \"text-neutral-200 \" +\n            \"hover:bg-blue-500 \" +\n            \"focus:outline-none focus-visible:outline-2 \" +\n            \"focus-visible:outline-offset-2 focus-visible:outline-blue-500 \" +\n            \"active:bg-blue-500\",\n    },\n    secondary: {\n        className:\n            \"not-prose rounded-md bg-blue-900 py-2 px-4 text-sm font-medium \" +\n            \"border border-solid border-blue-500/66 \" +\n            \"text-neutral-400 hover:bg-slate-700 \" +\n            \"disabled:bg-slate-700 disabled:border-blue-900 \" +\n            \"focus:outline-none focus-visible:outline-2 \" +\n            \"focus-visible:outline-offset-2 focus-visible:outline-white/50 \" +\n            \"active:text-slate-400\",\n    },\n    \"secondary-sm\": {\n        className:\n            \"not-prose rounded-md bg-blue-900 px-4 text-sm \" +\n            \"border border-solid border-blue-500/75 \" +\n            \"text-neutral-200 hover:bg-slate-700 \" +\n            \"disabled:bg-slate-700 disabled:border-blue-900 \" +\n            \"focus:outline-none focus-visible:outline-2 \" +\n            \"focus-visible:outline-offset-2 focus-visible:outline-white/50 \" +\n            \"active:text-slate-400\",\n    },\n};\n\ntype SpecialButtonProps = (\n    | React.ComponentPropsWithoutRef<\"button\">\n    | React.ComponentPropsWithoutRef<\"a\">\n) & {\n    variant?: \"primary\" | \"secondary\" | \"secondary-sm\";\n    href?: string;\n};\n\ninterface propsType {\n    children: any;\n    style?: Record<string, any>;\n    variant?: \"primary\" | \"secondary\" | \"secondary-sm\";\n    onClick: MouseEventHandler<any>;\n    className?: string;\n    href?: string;\n}\n\n/**\n * A button component\n * @remarks\n * Expects tailwind.\n * \n * @public\n */\nexport const Button = function (props: SpecialButtonProps) {\n    let {\n        variant = \"primary\",\n        style = {},\n        children,\n        className,\n        href,\n        ...moreProps\n    } = props;\n\n    const s = styles[variant];\n    className = clsx(s.className, className);\n    \n    if (href) {\n        const aprops = {\n            children,\n            href,\n            className,\n            style,\n            ...moreProps,\n        } as React.ComponentPropsWithoutRef<\"a\">;\n        return <a {...aprops} />;\n    }\n    \n    const bprops = {\n        children,\n        className,\n        style,\n        ...moreProps,\n    } as React.ComponentPropsWithoutRef<\"button\">;\n    return <button {...bprops} />;\n};\n","// A class-based implementation of ClientSideOnly that avoids React hooks \n// to prevent \"Invalid hook call\" errors when multiple React instances exist\n\nimport * as React from 'react';\n\ninterface ClientSideOnlyProps {\n  children: React.ReactNode | null;\n}\n\ninterface ClientSideOnlyState {\n  isClient: boolean;\n}\n\n/**\n * A React component wrapper that only renders its contents on the client side.\n * @remarks\n * Works with Next.js or any other SSR framework that do not trigger componentDidMount\n * @public\n */\nexport class ClientSideOnly extends React.Component<ClientSideOnlyProps, ClientSideOnlyState> {\n  constructor(props: ClientSideOnlyProps) {\n    super(props);\n    // Start with isClient = false\n    this.state = { isClient: false };\n  }\n\n  componentDidMount() {\n    // After mounting (which only happens client-side), set isClient to true\n    this.setState({ isClient: true });\n  }\n\n  render() {\n    // If we're not on the client yet, render an empty div\n    if (!this.state.isClient) {\n      return React.createElement('div', { suppressHydrationWarning: true });\n    }\n    \n    // Otherwise, render the children\n    return React.createElement(\n      'div', \n      { suppressHydrationWarning: true },\n      this.props.children\n    );\n  }\n}\n\n","import React, { useState, type ReactNode } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ClientSideOnly } from \"./ClientSideOnly.js\";\n\n/**\n * Directs react contents into a portal, with simple interface and automatic fallback\n * @public\n */\nexport function InPortal(props: {\n    domId: string;\n    fallbackLocation?: \"top\" | \"bottom\" | \"none\";\n    fallbackHelp?: string;\n    fallbackComponent?: React.ComponentType<any>;\n    delay?: number;\n    maxRetries?: number;\n    children: ReactNode;\n}) {\n    const {\n        domId,\n        fallbackLocation = \"none\",\n        fallbackHelp,\n        delay = 150,\n        maxRetries = 1,\n        children,\n        fallbackComponent : FallbackComponent,\n    } = props;\n    \n    const childrenAsNode = children as React.ReactNode;\n\n    if (\"undefined\" == typeof window) return <ClientSideOnly children={childrenAsNode} />;\n    const [renderCount, updateRenderCount] = useState(1);\n    const reRender = () => updateRenderCount(renderCount + 1);\n\n    let foundPortalTarget = document?.getElementById(domId);\n    const fallbackId =\n        fallbackLocation == \"none\" ? \"\" : `fallbackPortal-${domId}`;\n    if (!foundPortalTarget && fallbackLocation == \"none\") {\n        throw new Error(\n            `domId not found: ${domId} ; use \\`fallbackLocation=\"top | bottom\"\\` for magic portal creation if desired`\n        );\n    }\n    let fallbackPortalHost =\n        foundPortalTarget || document.getElementById(fallbackId);\n    if (foundPortalTarget) {\n        return createPortal(\n            <ClientSideOnly children={childrenAsNode} />,\n            foundPortalTarget\n        );\n    } else if (fallbackPortalHost) {\n        if (FallbackComponent) {\n            return createPortal(\n                <ClientSideOnly children={<FallbackComponent>{childrenAsNode}</FallbackComponent>} />,\n                fallbackPortalHost\n            );\n        }\n        return createPortal(\n            <ClientSideOnly children={childrenAsNode} />,\n            fallbackPortalHost\n        );\n    }\n\n    const tryOnceOrAgain = renderCount == 1 ? true : renderCount < maxRetries;\n\n    if (tryOnceOrAgain)\n        setTimeout(() => {\n            if (\n                document.getElementById(domId) ||\n                (fallbackId && document.getElementById(fallbackId))\n            ) {\n                reRender();\n                return;\n            }\n\n            if (!fallbackId && renderCount > maxRetries) {\n                console.log(\n                    fallbackHelp ||\n                        `no explicit fallbackLocation provided and the target portal-id '${domId}' is not available`\n                );\n                console.log(\n                    \"if you need more time to render the target portal, you can add a delay=‹ms› prop greater than 150 (ms) that will be tried up to 10x\"\n                );\n                console.error(\n                    `<inPortal>: max retries exceeded while waiting for explicit portal.  Can't show UI details for portal ${domId}`\n                );\n                return;\n            }\n            if (renderCount > maxRetries) {\n                // shouldn't be reachable\n                console.error(\n                    `<inPortal>: max retries exceeded without expected fallback portal; Can't show UI details for portal ${domId}`\n                );\n                return;\n            }\n            console.warn(\n                `domId not available: ${domId} ; creating ${fallbackId}\\n` +\n                    `if your app needs more time to render the target portal, you can add a delay=‹ms› prop` +\n                    (fallbackHelp ? `\\n  ${fallbackHelp}` : \"\")\n            );\n\n            const someDiv = document.createElement(\"div\");\n            someDiv.id = fallbackId;\n            someDiv.style.width = \"100%\";\n            someDiv.style.border = \"2px dashed purple\";\n            if (fallbackLocation == \"top\") {\n                document.body.prepend(someDiv);\n            } else {\n                document.body.appendChild(someDiv);\n                someDiv.style.position = \"fixed\";\n                someDiv.style.zIndex = \"9999\";\n                someDiv.style[fallbackLocation] = \"0\";\n            }\n            reRender();\n        }, delay);\n\n    return <ClientSideOnly children={null} />;\n}\n","import React, { useEffect } from \"react\";\n\n/**\n * Props for the progress bar\n * @public\n */\ninterface ProgressProps {\n    /**\n     * The percentage of progress (0-100)\n     */\n    progressPercent: number\n    children: React.ReactNode;\n}\n\n/**\n * A progress bar\n * @public\n */\nexport const Progress = ({ children, progressPercent }: ProgressProps ) => {\n    // a random but persistent number for element id, called only once.\n    const [myId] = React.useState(() => {\n        return (42424242 * Math.random()).toString(36).substring(7)\n    });\n    const [isMounted, setIsMounted] = React.useState(false);\n    useEffect(() => {\n        setIsMounted(true);\n    }, []);\n    if (!isMounted) {\n        return null;\n    }\n    const concreteIndicatorProps = progressPercent ? {\n        value: progressPercent,\n        max: 100,\n    } : {}\n\n    return (\n        <div>\n            {/* <div aria-busy=\"true\" aria-describedby=\"progress-bar\"></div> */}\n            <label htmlFor={`progress-bar-${myId}`}>{children}</label>\n            <div className=\"progress progress-striped h-3\">\n                <progress\n                    className=\"progress-bar\"\n                    {...concreteIndicatorProps}\n                    id={`progress-bar-${myId}`}\n                    aria-label=\"Content loading…\"\n                >...busy... /* only for lame old browsers */</progress>\n            </div>\n        </div>\n    );\n};\n","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='693' height='1115' viewBox='0 0 693 1115' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg opacity='0.1' filter='url(%23filter0_f_2041_227)'%3e%3ccircle cx='82' cy='504' r='267' fill='%23B44795'/%3e%3c/g%3e%3cdefs%3e%3cfilter id='filter0_f_2041_227' x='-529' y='-107' width='1222' height='1222' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3e%3cfeGaussianBlur stdDeviation='172' result='effect1_foregroundBlur_2041_227'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e\";\n  export default img;","import React from \"react\";\nimport ellipse from \"./assets/ellipse.svg\";\n\n/**\n * A template for a dashboard layout\n * @remarks\n * Expects tailwind.\n * @public\n */\nexport function DashboardTemplate(props: {\n    title: string;\n    children: React.ReactNode;\n}) {\n    return (\n        <div className=\"relative my-2 flex w-full flex-col gap-4\">\n            <img\n                alt=\"blurred background\"\n                height={260}\n                width={260}\n                src={ellipse}\n                className=\"size-40 absolute -left-44 top-20 -z-10 h-96 w-96 overflow-hidden bg-black/20 opacity-50 blur-[344px]\"\n            />\n            <img\n                alt=\"blurred background\"\n                height={260}\n                width={260}\n                src={ellipse}\n                className=\"size-40 absolute -right-44 top-20 -z-10 h-96 w-96 overflow-hidden bg-black/20 opacity-50 blur-[344px]\"\n            />\n            <div className=\"self-start text-2xl font-semibold\">\n                <h3>{props.title}</h3>\n            </div>\n            {props.children}\n        </div>\n    );\n}\n\n/**\n * A row for a dashboard layout\n * @remarks\n * Expects tailwind.\n * @public\n */\nexport function DashboardRow(props: {\n    title?: string;\n    children: React.ReactNode;\n}) {\n    return (\n        <div>\n            {props.title && (\n                <h4 className=\"text-lg font-semibold\">{props.title}</h4>\n            )}\n            <div className=\"grid grid-cols-3 gap-x-4 rounded-3xl\">\n                {props.children}\n            </div>\n        </div>\n    );\n}\n\n/**\n * A summary area for a dashboard layout\n * @remarks\n * Children should be <li> elements or <DashSummaryItem> elements, and are displayed as a grid.\n * \n * Expects tailwind.\n * @public\n */\nexport function DashboardSummary(props: {\n    title: string;\n    children: React.ReactNode;\n}) {\n    return (\n        <div className=\"bg-background/20 col-span-1 flex h-full flex-col items-start justify-between rounded-3xl border border-white/10 p-6\">\n            <h5 className=\"text-lg\">{props.title}</h5>\n            <ul className=\"grid w-full grid-cols-2 grid-rows-3 gap-4\">\n                {props.children}\n            </ul>\n        </div>\n    );\n}\n\n/**\n * A summary item for a dashboard layout\n * @remarks\n * \n * The first child becomes a low-level (h6) heading\n * \n * Other children are displayed as-is.\n * \n * Expects tailwind.\n * @public\n */\nexport function DashSummaryItem(props: {\n    title: string;\n    children: React.ReactNode;\n}) {\n    const firstChild = Array.isArray(props.children)\n        ? props.children[0]\n        : props.children;\n    const otherChildren = Array.isArray(props.children)\n        ? props.children.slice(1)\n        : [];\n    return (\n        <li>\n            <span className=\"inline-flex items-baseline gap-x-1\">\n                <h6 className=\"text-2xl leading-[30px]\">{firstChild}</h6>\n                {otherChildren}\n            </span>\n            <p className=\"text-sm font-light leading-[17px] opacity-90\">\n                {props.title}\n            </p>\n        </li>\n    );\n}\n\n/**\n * A highlights area for a dashboard layout\n * @remarks\n * children should be <li> elements\n * \n * Expects tailwind.\n * @public\n */\nexport function DashboardHighlights(props: {\n    title?: string;\n    className?: string;\n    colSpan?: string;\n    footer?: string | React.ReactNode;\n    children: React.ReactNode;\n}) {\n    const { title, className = \"\", colSpan = \"2\", footer, children } = props;\n    const colSpanClasses = [\n        undefined,\n        undefined,\n        \"col-span-2\",\n        \"col-span-3\",\n        \"col-span-4\",\n        \"col-span-5\",\n        \"col-span-6\",\n        \"col-span-7\",\n        \"col-span-8\",\n        \"col-span-9\",\n        \"col-span-10\",\n    ];\n    const normalClasses =\n        \"flex flex-col justify-between p-3 px-4 bg-background/20 h-full \" +\n        \"rounded-2xl border border-white/10\";\n    const titleMarkup = title ? <h5 className=\"text-lg\">{title}</h5> : null;\n    const footerContent = footer ? (\n        <div className=\"flex flex-row w-full justify-between mt-auto\">\n            <div className=\"text-sm text-gray-500 flex-1 text-right\">\n                {footer}\n            </div>\n        </div>\n    ) : null;\n    return (\n        <div\n            key=\"dash-highlight-box\"\n            className={`${className} ${colSpanClasses[colSpan]} ${normalClasses}`}\n        >\n            {titleMarkup}\n            <ul className=\"grid w-full grid-cols-3 gap-4\">{children}</ul>\n            {footerContent}\n        </div>\n    );\n}\n\n/**\n * A highlight item for a dashboard layout, using a smallish box with vertical (columnar) flex\n * @remarks\n * \n * Add a className to provide additional style.\n * \n * Expects tailwind.\n * @public\n */\nexport function DashHighlightItem(props: {\n    title?: string;\n    button?: string;\n    onClick?: () => void;\n    titleClassName?: string;\n    className?: string;\n    style?: React.CSSProperties;\n    children: React.ReactNode;\n    footer?: string | React.ReactNode;\n}) {\n    const {\n        title,\n        button,\n        onClick,\n        titleClassName = \"text-lg\",\n        children,\n        className = `rounded-lg border border-(--color-border)/20 bg-(--color-card)/50 text-(--color-card-foreground) p-2`,\n        style = {},\n        footer,\n    } = props;\n    const firstChild = Array.isArray(children) ? children[0] : children;\n    const otherChildren = Array.isArray(children) ? children.slice(1) : [];\n    return (\n        <li className={`flex flex-col h-full ${className}`} style={style}>\n            <div className=\"flex-none\">\n                <h6 className=\"text-md leading-[15px]\">{firstChild}</h6>\n                <div className=\"text-sm\">{otherChildren}</div>\n            </div>\n            <div\n                id=\"labelAndButton\"\n                className={`${titleClassName} mt-auto gap-y-1 text-right justify-end`}\n            >\n                {title}\n                {button && (\n                    <ActionButton {...{ onClick }}>{button}</ActionButton>\n                )}\n            </div>\n            {footer && (\n                <Softlight className=\"text-right text-sm italic text-gray-400\">\n                    {footer}\n                </Softlight>\n            )}\n        </li>\n    );\n}\n\n/**\n * A button that is styled to look like a primary action button\n * @remarks\n * Choose a size= or use \"md\" as the default.\n * \n * Add a className to provide additional style.\n * \n * Expects tailwind.\n * @public\n */\nexport function ActionButton(props: {\n    className?: string;\n    onClick?: () => void;\n    size?: \"xs\" | \"sm\" | \"md\" | \"lg\";\n    children: React.ReactNode;\n}) {\n    const { children, onClick, className = \"\", size = \"md\" } = props;\n    return (\n        <button\n            onClick={onClick}\n            className={`${\n                className\n            } font-bold bg-(--color-primary) text-[color-mix(in srgb, var(--color-foreground) 50%, white 50%)] ${\n                \" hi-there \"\n            } text-${size} border-2 border-(--color-border) rounded-${size} cursor-pointer px-2 py-1`}\n        >\n            {children}\n        </button>\n    );\n}\n\n/**\n * A column for the dashboard layout\n * @remarks\n * Expects tailwind.\n * \n * @public\n */\nexport function Column(props: {\n    widthPercent: number;\n    children: React.ReactNode;\n}) {\n    const { widthPercent, children } = props;\n    return (\n        <div\n            className={`flex flex-col ${\n                widthPercent ? \"w-\" + widthPercent.toString() : \"\"\n            } p-8`}\n        >\n            {children}\n        </div>\n    );\n}\n\n/**\n * shows its content in the theme color of the accent foreground\n * @remarks\n * Allows for any as=‹htmlTag› to be used instead of the default <p> tag.\n * \n * Add a className to provide additional style.\n * \n * Expects tailwind.\n * @public\n */\nexport function Highlight(props: {\n    as?: keyof JSX.IntrinsicElements;\n    className?: string;\n    children: React.ReactNode;\n}) {\n    const { as: As = \"p\", className = \"\", children } = props;\n    return (\n        <As\n            className={`${className} text-(--color-accent-foreground) text-[13px] font-normal`}\n        >\n            {children}\n        </As>\n    );\n}\n\n/**\n * shows its content in a softened version of the theme color of the accent foreground\n * @remarks\n * Allows for any as=‹htmlTag› to be used instead of the default <p> tag.\n * \n * Add a className to provide additional style.\n * \n * Expects tailwind.\n * @public\n */\nexport function Lowlight(props: {\n    as?: keyof JSX.IntrinsicElements;\n    className?: string;\n    children: React.ReactNode;\n}) {\n    const { as: As = \"div\", className = \"\", children } = props;\n    return (\n        <As\n            className={`${className} text-(--color-accent-foreground) font-normal opacity-50`}\n        >\n            {children}\n        </As>\n    );\n}\n\n/**\n * shows its content in a softened version of the theme color of the accent foreground\n * @remarks\n * Allows for any as=‹htmlTag› to be used instead of the default <span> tag.\n * \n * Add a className to provide additional style.\n * \n * Expects tailwind.\n * @public\n */\nexport function Softlight(props: {\n    as?: keyof JSX.IntrinsicElements;\n    className?: string;\n    children: React.ReactNode;\n}) {\n    const { as = \"span\", children, className = \"\" } = props;\n    const As = as as keyof JSX.IntrinsicElements;\n\n    return (\n        <As className={`${className} font-normal opacity-50`}>{children}</As>\n    );\n}\n","import type {\n    ResolveablePromise,\n    TxDescription,\n    TxSubmissionTracker,\n    StellarTxnContext,\n} from \"@donecollectively/stellar-contracts\";\nimport {\n    BatchSubmitController,\n    dumpAny,\n} from \"@donecollectively/stellar-contracts\";\nimport type { Tx } from \"@helios-lang/ledger\";\nimport { decodeTx } from \"@helios-lang/ledger\";\nimport * as React from \"react\";\nimport {\n    ActionButton,\n    Highlight,\n    Lowlight,\n    Softlight,\n    DashboardRow,\n    DashboardHighlights,\n    DashHighlightItem,\n} from \"./DashboardTemplate.js\";\nimport { Button } from \"./Button.js\";\n\n/**\n * Shows a master/detail view of the tx batch\n * @remarks\n * Includes a list of txns on the left\n *\n * Shows the details of the selected txn on the right\n *\n * Shows a summary of the batch status at the top\n * @public\n */\nexport function TxBatchViewer({\n    batch,\n    initialId,\n    advancedView,\n}: {\n    batch: BatchSubmitController;\n    initialId?: string;\n    advancedView: boolean;\n}) {\n    const [selectedId, setSelectedId] = React.useState<string | undefined>(\n        initialId\n    );\n    const [selectedTx, setSelectedTx] = React.useState<Tx | undefined>();\n    const [txMgr, setTxMgr] = React.useState<TxSubmissionTracker | undefined>();\n    const [gen, setGen] = React.useState(0);\n\n    const renderNow = React.useMemo(() => () => setGen((g) => g + 1), []);\n\n    React.useEffect(() => {\n        if (!selectedId) return;\n        const tx = batch.$txStates[selectedId];\n        if (!tx) return;\n        setTxMgr(tx);\n    }, [selectedId, batch]);\n\n    React.useEffect(() => {\n        if (!txMgr?.txd.tx) return;\n        const tx = txMgr.txd.tx;\n        if (typeof tx === \"string\") {\n            setSelectedTx(decodeTx(tx));\n        } else {\n            setSelectedTx(tx);\n        }\n    }, [txMgr]);\n\n    React.useEffect(() => {\n        batch.$txChanges.on(\"txAdded\", renderNow);\n        batch.$txChanges.on(\"statusUpdate\", renderNow);\n        return () => {\n            batch.$txChanges.off(\"txAdded\", renderNow);\n            batch.$txChanges.off(\"statusUpdate\", renderNow);\n        };\n    }, [batch, renderNow]);\n\n    const width = advancedView ? \"w-9/12\" : \"\";\n\n    return (\n        <>\n            <div className=\"border-1 border-(--color-card) flex w-full flex-row gap-2 rounded-md drop-shadow-md\">\n                <ShowTxList\n                    batch={batch}\n                    initialId={initialId}\n                    renderNow={renderNow}\n                    selectedId={selectedId}\n                    setSelectedId={setSelectedId}\n                    advancedView={advancedView}\n                />\n                {(() => {\n                    const indicateSelectedTx = selectedId\n                        ? \"border-s-4 border-s-brand-orange/20\"\n                        : \"\";\n\n                    const cardStyle =\n                        \"bg-(--color-card) text-(--color-card-foreground)\";\n\n                    if (!selectedId) {\n                        return (\n                            <div\n                                className={`${indicateSelectedTx} ${cardStyle} ${width} rounded-md border border-white/10 p-2`}\n                            >\n                                <Softlight>\n                                    Select a transaction to view details\n                                </Softlight>\n                            </div>\n                        );\n                    }\n\n                    if (!txMgr) {\n                        return (\n                            <div\n                                className={`${indicateSelectedTx} ${cardStyle} ${width} rounded-md border border-white/10 p-2`}\n                            >\n                                <Softlight>\n                                    Loading transaction details...\n                                </Softlight>\n                            </div>\n                        );\n                    }\n\n                    return (\n                        <div\n                            className={`${indicateSelectedTx} z-3 ${cardStyle} ${width} flex flex-col rounded-md border border-white/10 p-2`}\n                        >\n                            <ShowTxDescription\n                                txTracker={txMgr}\n                                tx={selectedTx}\n                                advancedView={advancedView}\n                            />\n                        </div>\n                    );\n                })()}\n            </div>\n        </>\n    );\n}\n\nfunction ShowTxList({\n    batch,\n    initialId,\n    renderNow,\n    selectedId,\n    setSelectedId,\n    advancedView,\n}: {\n    batch: BatchSubmitController;\n    initialId?: string;\n    renderNow: () => void;\n    selectedId: string | undefined;\n    setSelectedId: (id: string | undefined) => void;\n    advancedView: boolean;\n}) {\n    const { $allTxns } = batch;\n    const byId = {} as Record<string, TxDescription<any, any>>;\n\n    const width = advancedView ? \"w-3/12\" : \"w-9/12\";\n\n    return (\n        <div className={`z-4 flex ${width} flex-grow flex-col gap-0`}>\n            {batch.$allTxns.map((txTracker) => {\n                return (\n                    <ShowSingleTx\n                        key={txTracker.txd.id}\n                        {...{\n                            txTracker,\n                            selectedId,\n                            setSelectedId,\n                            advancedView,\n                        }}\n                    />\n                );\n            })}\n        </div>\n    );\n}\n\nconst ShowSingleTx = (props: {\n    txTracker: TxSubmissionTracker;\n    selectedId?: string;\n    setSelectedId: (id: string | undefined) => void;\n    advancedView: boolean;\n}) => {\n    const { txTracker, selectedId, setSelectedId, advancedView } = props;\n    const { $state, txSubmitters, txd } = txTracker;\n    let {\n        id,\n        txName,\n        description,\n        tcx,\n        tx,\n        moreInfo,\n        depth = 0,\n        parentId,\n    } = txd;\n    if (!txName) {\n        txName = description;\n        description = \"\";\n    }\n    const submitterStates = Object.values(txSubmitters)\n        .map((s) => s.$$statusSummary)\n        .join(\", \");\n\n    const isCurrent = id == selectedId;\n    const countNested = txd.tcx?.addlTxns\n        ? Object.keys(txd.tcx.addlTxns).length\n        : 0;\n\n    // Calculate depth for indentation\n    const XindentClass = [\"pl-0\", \"pl-2\", \"pl-4\", \"pl-6\", \"pl-8\", \"pl-10\"][\n        depth\n    ];\n\n    const indentClass = [\n        \"border-s-0\",\n        \"border-s-6\",\n        \"border-s-12\",\n        \"border-s-18\",\n        \"border-s-24\",\n    ][depth];\n\n    const innerMarginClass = [\"ml-0\", \"ml-1\", \"ml-3\", \"ml-5\", \"ml-7\", \"ml-9\"][\n        depth\n    ];\n    const outerMarginClass = depth ? \"ml-2\" : \"ml-0\";\n\n    // Visual indicator for nested transactions\n    const nestedIndicator = depth\n        ? `${indentClass} border-(--color-accent-foreground)/30`\n        : \"\";\n\n    // <Softlight>{submitterStates}</Softlight>\n    // {countNested > 0 && (\n    //     <Lowlight>\n    //         {countNested} nested txns\n    //     </Lowlight>\n    // )}\n    const indicateSelectedTx = isCurrent\n        ? \"text-bold rounded-md border-e-0 -mr-5 pe-6 z-3\"\n        : \"cursor-pointer opacity-55\";\n\n    return (\n        <div\n            key={id}\n            onClick={isCurrent ? undefined : () => setSelectedId(id)}\n            className={`${outerMarginClass}`}\n            // className={`${indentClass}`}\n        >\n            <div className={`${nestedIndicator} pl-2`}>\n                <div\n                    key={id}\n                    title={txd.txName || txd.description}\n                    // button={isCurrent ? undefined : \"Select\"}\n                    className={`${innerMarginClass} bg-(--color-card) text-(--color-card-foreground) flex min-h-[0.66in] flex-row rounded-md border border-white/10 p-2 text-sm ${indicateSelectedTx}`}\n                >\n                    <div className={`w-8/12`}>\n                        {txName ? (\n                            <>\n                                <b>{txName}</b>\n                                <br />\n                                <div className=\"ml-2 opacity-50\">\n                                    {description}\n                                </div>\n                                {/* <div className=\"ml-2 opacity-50\">\n                                    {submitterStates}\n                                </div> */}\n                            </>\n                        ) : (\n                            description\n                        )}\n                    </div>\n\n                    <div className={`w-1/12 text-right`}>\n                        {$state == \"building\" && (\n                            <>\n                                <svg\n                                    aria-hidden=\"true\"\n                                    className=\"h-5 w-5 animate-spin fill-blue-600 text-gray-200 dark:text-gray-600\"\n                                    viewBox=\"0 0 100 101\"\n                                    fill=\"none\"\n                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                >\n                                    <path\n                                        d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\"\n                                        fill=\"currentColor\"\n                                    />\n                                    <path\n                                        d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\"\n                                        fill=\"currentFill\"\n                                    />\n                                </svg>\n                                <span className=\"sr-only\">Loading...</span>\n                            </>\n                        )}\n                    </div>\n                    <div className={`w-3/12 text-right`}>\n                        {$state}\n                        <br />\n                        {!!countNested ? <>+{countNested} nested</> : \"\"}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nfunction ShowTxDescription({\n    txTracker,\n    tx,\n    advancedView,\n}: {\n    txTracker: TxSubmissionTracker;\n    tx?: Tx;\n    advancedView: boolean;\n}) {\n    const { $state, txSubmitters, id, txd } = txTracker;\n    const { tcx, txCborHex, signedTxCborHex } = txd;\n\n    // Add tab state management\n    const availableTabs = {\n        transcript: true,\n        structure: true,\n        diagnostics: true,\n    };\n    const [tab, setTab] =\n        React.useState<keyof typeof availableTabs>(\"transcript\");\n\n    // Add state for signed transaction\n    const [signedTx, setSignedTx] = React.useState<Tx | undefined>();\n\n    // Decode signed transaction when available\n    React.useEffect(() => {\n        if (!signedTxCborHex) return;\n\n        try {\n            const decodedTx = decodeTx(signedTxCborHex);\n            setSignedTx(decodedTx);\n        } catch (e) {\n            console.error(\"Failed to decode signed transaction:\", e);\n        }\n    }, [signedTxCborHex]);\n\n    return (\n        <div className=\"flex flex-col gap-2 \">\n            <div className=\"flex flex-col justify-between\">\n                {/* Sign & Submit button */}\n                <div className=\"basis-1/9\">\n                    {tx && txTracker && tcx && !tcx.isFacade && $state != \"confirmed\" &&  (\n                        <ActionButton\n                            className=\"mt-2 self-start\"\n                            onClick={() => txTracker.$signAndSubmit?.()}\n                        >\n                            Sign&nbsp;&amp;&nbsp;Submit\n                        </ActionButton>\n                    )}\n                </div>\n                {advancedView && (\n                    <>\n                        <div className=\"ml-4 flex-grow self-start\">\n                            <Highlight className=\"text-xl\">\n                                {txd.txName || txd.description}\n                            </Highlight>\n                            {txd.txName && txd.description && (\n                                <div className=\"text-md display-inline ml-4 opacity-50\">\n                                    {txd.description}\n                                </div>\n                            )}\n                            {txd.moreInfo && (\n                                <div className=\"text-brand-orange/66 ml-8 text-sm italic\">\n                                    {txd.moreInfo}\n                                </div>\n                            )}\n                        </div>\n                    </>\n                )}\n                {advancedView && (\n                    <div id=\"tab-selector\">\n                        {Object.keys(availableTabs).map((key) => {\n                            const isSelected = key === tab;\n                            const selectedTabClass = isSelected\n                                ? \"rounded-t-md bg-(--color-card) text-(--color-card-foreground) border-x-1 border-t-3 border-(--color-border)/50\"\n                                : \" rounded-t-md bg-(--color-secondary)/70 text-(--color-secondary-foreground)\";\n                            return (\n                                <button\n                                    key={key}\n                                    className={`${selectedTabClass} ml-1 px-2 py-1 text-sm`}\n                                    onClick={() =>\n                                        setTab(\n                                            key as keyof typeof availableTabs\n                                        )\n                                    }\n                                >\n                                    {key}\n                                </button>\n                            );\n                        })}\n                        <Lowlight className=\"float-right\">{$state}</Lowlight>\n                    </div>\n                )}\n\n                {/* Tab content */}\n                {advancedView && (\n                    <div className=\"-mt-2 border-t border-white/10 pt-1\">\n                        {/* Transcript tab */}\n                        {tab === \"transcript\" && (\n                            <>\n                                <div className=\"flex flex-col gap-1\">\n                                    {Object.entries(txSubmitters).map(\n                                        ([key, submitter]) => (\n                                            <div\n                                                key={key}\n                                                className=\"flex flex-row justify-between rounded-md border border-white/10 p-2\"\n                                            >\n                                                <div className=\"w-1/3\">\n                                                    <h4 className=\"text-sm font-semibold\">\n                                                        {key}\n                                                    </h4>\n                                                </div>\n                                                <div className=\"w-2/3\">\n                                                    <Lowlight>{`${submitter.$$statusSummary.status} - ${submitter.$$statusSummary.currentActivity}`}</Lowlight>\n                                                    <div className=\"text-xs\">\n                                                        <pre>\n                                                            {JSON.stringify(\n                                                                submitter.$$statusSummary,\n                                                                null,\n                                                                2\n                                                            )}\n                                                        </pre>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )\n                                    )}\n                                </div>\n\n                                {tcx?.logger?.formattedHistory && (\n                                    <code>\n                                        <pre className=\"mt-4 max-h-[90vh] overflow-auto bg-neutral-200 text-xs text-black\">\n                                            {tcx.logger.formattedHistory?.map(\n                                                (line1) =>\n                                                    line1\n                                                        ?.split(\"\\n\")\n                                                        .map((line2) => {\n                                                            let prefix:\n                                                                    | React.ReactNode\n                                                                    | string = (\n                                                                    <></>\n                                                                ),\n                                                                rest:\n                                                                    | React.ReactNode\n                                                                    | string = (\n                                                                    <></>\n                                                                );\n                                                            /*.replaceAll(\"\", \"<span className=font-formal\")*/\n                                                            [prefix, rest] =\n                                                                line2.split(\n                                                                    \"❗\",\n                                                                    2\n                                                                );\n                                                            if (rest) {\n                                                                let size = \"\";\n                                                                if (\n                                                                    (\n                                                                        rest as string\n                                                                    ).match(\n                                                                        /^\\s+\\.\\.\\./\n                                                                    )\n                                                                ) {\n                                                                    rest = (\n                                                                        rest as string\n                                                                    ).replace(\n                                                                        /^\\s+\\.\\.\\.\\s+/,\n                                                                        \"…\"\n                                                                    );\n                                                                    size =\n                                                                        \"text-[1.35em] -ml-2\";\n                                                                }\n                                                                rest = (\n                                                                    <span\n                                                                        className={`text-[1.6em] font-formal -ml-5 font-bold`}\n                                                                    >\n                                                                        ❗\n                                                                        <span\n                                                                            className={`${size}`}\n                                                                        >\n                                                                            {\n                                                                                rest\n                                                                            }\n                                                                        </span>\n                                                                    </span>\n                                                                );\n                                                            } else {\n                                                                prefix = (\n                                                                    <span className=\"text-gray-600\">\n                                                                        {prefix}\n                                                                    </span>\n                                                                );\n                                                            }\n                                                            return (\n                                                                <>\n                                                                    {prefix}{\" \"}\n                                                                    {rest}\n                                                                    <br />{\" \"}\n                                                                </>\n                                                            );\n                                                        })\n                                            )}\n                                        </pre>\n                                    </code>\n                                )}\n                            </>\n                        )}\n\n                        {/* Structure tab */}\n                        {tab === \"structure\" && tx && (\n                            <>\n                                <h4 className=\"text-sm\">\n                                    Unsigned Tx:{\" \"}\n                                    {tx.id?.()?.toString?.() || \"Unknown ID\"}\n                                </h4>\n\n                                <code className=\"text-sm\">\n                                    <pre className=\"font-formal text-[1.30em]/4.5 tracking-wide max-h-[80vh] overflow-auto\">\n                                        {dumpAny(\n                                            tx,\n                                            txTracker.setup.networkParams\n                                        )}\n                                    </pre>\n                                    {txCborHex && (\n                                        <div className=\"mt-2 text-xs\">\n                                            CBOR Hex:{\" \"}\n                                            <span className=\"break-all\">\n                                                {txCborHex}\n                                            </span>\n                                        </div>\n                                    )}\n                                </code>\n                            </>\n                        )}\n\n                        {/* Diagnostics tab */}\n                        {tab === \"diagnostics\" && (\n                            <>\n                                {signedTx ? (\n                                    <>\n                                        <h3>Signed Tx</h3>\n                                        <h4>\n                                            {signedTx.id?.()?.toString?.() ||\n                                                \"Unknown ID\"}\n                                        </h4>\n\n                                        <code className=\"text-xs\">\n                                            <pre className=\"max-h-64 overflow-auto\">\n                                                {dumpAny(\n                                                    signedTx,\n                                                    txTracker.setup\n                                                        .networkParams\n                                                )}\n                                            </pre>\n                                            {signedTxCborHex ? (\n                                                <div className=\"mt-2\">\n                                                    CBOR Hex:{\" \"}\n                                                    <span className=\"break-all\">\n                                                        {signedTxCborHex.length /\n                                                            2}{\" \"}\n                                                        bytes: <br />\n                                                        {signedTxCborHex}\n                                                    </span>\n                                                </div>\n                                            ) : (\n                                                <div>‹not yet signed›</div>\n                                            )}\n                                        </code>\n                                    </>\n                                ) : (\n                                    <div>Not yet signed</div>\n                                )}\n                            </>\n                        )}\n                    </div>\n                )}\n\n                {/* Nested Transactions section (shown in all tabs) */}\n                {advancedView &&\n                    txd.tcx?.addlTxns &&\n                    Object.keys(txd.tcx.addlTxns).length > 0 && (\n                        <div className=\"mt-4 flex flex-col gap-1 border-t border-white/10 pt-4\">\n                            <Softlight>Nested Transactions:</Softlight>\n                            {Object.entries(txd.tcx.addlTxns).map(\n                                ([key, tx]) => (\n                                    <div\n                                        key={key}\n                                        className=\"flex flex-row justify-between\"\n                                    >\n                                        <Lowlight>{key}</Lowlight>\n                                        <Lowlight>{tx.id}</Lowlight>\n                                    </div>\n                                )\n                            )}\n                        </div>\n                    )}\n            </div>\n        </div>\n    );\n}\n","import { BatchSubmitController } from \"@donecollectively/stellar-contracts\";\nimport React from \"react\";\nimport { useCapoDappProvider } from \"./CapoDappProvider.js\";\nimport { TxBatchViewer } from \"./TxBatchViewer.js\";\nimport { Button } from \"./Button.js\";\n\nexport function TxBatchUI() {\n    const provider = useCapoDappProvider();\n    const capo = provider?.capo;\n\n    const [currentBatch, setTxBatch] = React.useState<BatchSubmitController>();\n    const [initialId, setInitialId] = React.useState<string | undefined>(\n        undefined\n    );\n\n    const [advancedView, setAdvancedView] = React.useState(false);\n\n    const batchSize = currentBatch?.$allTxns.length;\n    const viewSwitcher = (\n        <div className=\"flex flex-row justify-between p-2\">\n            <div>\n                <h3 className=\"bg-transparent mt-0 mb-2\">Pending Txns</h3>\n                {batchSize && batchSize > 1 && <>{batchSize} txns in batch</>}\n            </div>\n            <div>\n                <Button variant=\"secondary-sm\"\n                    className=\"ml-3\"\n                    onClick={() => {\n                        setAdvancedView(!advancedView);\n                    }}\n                >\n                    {advancedView ? \"Hide details\" : \"Show details\"}\n                </Button>\n            </div>\n        </div>\n    );\n\n    React.useEffect(\n        function monitorTxBatcher() {\n            if (!capo) return;\n            const { txBatcher } = capo.setup;\n\n            txBatcher.$notifier.on(\"rotated\", (batch) => {\n                console.log(\"batch rotated\", batch);\n                const txns = batch.$allTxns;\n                if (txns.length) {\n                    setInitialId(txns[0].id);\n                } else {\n                    batch.$txChanges.once(\"txAdded\", (txTracker) => {\n                        console.log(\"tx added\", txTracker);\n                        const { id } = txTracker;\n                        setInitialId(id);\n                    });\n                }\n                setTxBatch(batch);\n            });\n        },\n        [capo, capo?.setup.txBatcher]\n    );\n\n    const hasBatch = !!currentBatch && !!currentBatch?.$allTxns.length;\n\n    const width = advancedView ? \"w-[80vw]\" : \"\";\n    if (!hasBatch) return null;\n    return (\n        <div\n            className={`z-100 bg-background/66 absolute top-10 right-4 ${width} flex flex-col rounded-lg border border-white/10 backdrop-blur-md`}\n        >\n            {viewSwitcher}\n            <TxBatchViewer\n                batch={currentBatch}\n                {...{ initialId, advancedView }}\n            />\n        </div>\n    );\n}\n","import React, {\n    type ChangeEventHandler,\n    type MouseEventHandler,\n    Component,\n    Fragment,\n} from \"react\";\nimport {\n    makeHydraClient,\n    makeRandomRootPrivateKey,\n    makeRootPrivateKey,\n    type BlockfrostV0Client,\n    type CardanoClient,\n    type Cip30FullHandle,\n    type Cip30Wallet,\n    type HydraClientOptions,\n    type SimpleWallet,\n    type TxChainBuilder,\n    type Wallet,\n    type WalletHelper,\n} from \"@helios-lang/tx-utils\";\nimport type { NetworkParams, Tx, TxInput } from \"@helios-lang/ledger\";\nimport {\n    makeBlockfrostV0Client,\n    makeCip30Wallet,\n    makeRandomSimpleWallet,\n    makeSimpleWallet,\n    makeTxChainBuilder,\n    makeWalletHelper,\n} from \"@helios-lang/tx-utils\";\n\nimport {\n    TransactionSubmission,\n    type Connection,\n    type ConnectionConfig,\n    createInteractionContext,\n    createTransactionSubmissionClient,\n    createLedgerStateQueryClient,\n} from \"@cardano-ogmios/client\";\n\nimport type {\n    Capo,\n    CapoConfig,\n    ConfigFor,\n    MinimalCharterDataArgs,\n    namedSubmitters,\n    simpleOgmiosConn,\n    StellarFactoryArgs,\n    stellarSubclass,\n    submitterName,\n    TxBatcherOptions,\n    TxDescription,\n} from \"@donecollectively/stellar-contracts\";\n\nimport {\n    GenericSigner,\n    OgmiosTxSubmitter,\n    StellarTxnContext,\n    TxBatcher,\n    UutName,\n    dumpAny,\n    parseCapoJSONConfig,\n} from \"@donecollectively/stellar-contracts\";\n\nimport { Button } from \"./Button.js\";\nimport { InPortal } from \"./inPortal.js\";\nimport { Progress } from \"./Progress.js\";\nimport { ClientSideOnly } from \"./ClientSideOnly.js\";\nimport { TxBatchUI } from \"./TxBatchUI.js\";\nimport { environment } from \"../environment.js\";\nimport { bytesToHex, hexToBytes } from \"@helios-lang/codec-utils\";\n\n/**\n * @public\n */\nexport type stateUpdaterFunc = CapoDAppProvider<Capo<any>>[\"updateStatus\"];\n/**\n * @public\n */\nexport type errorFunc = CapoDAppProvider<Capo<any>>[\"reportError\"];\n/**\n * @public\n */\nexport type renderFunc = () => JSX.Element | JSX.Element[] | string | void;\n\nconst networkNames = {\n    0: \"preprod\",\n    1: \"mainnet\",\n    2: \"preview\",\n};\n\nlet mountCount = 0;\n\n// const bfKeys = {\n//     mainnet: \"mainnetvtlJdtsOo7nNwf58Az9F5HRDGCIkxujZ\",\n//     preprod: \"preprodCwAM4ABR6SowGsmURORvDJvQTyWmCHJP\",\n// };\n\n/**\n * @public\n */\nexport type UpdateStateProps = Partial<\n    Omit<CapoDappProviderState<any>, \"status\">\n>;\n\n/**\n * @public\n */\nexport type UpdateStatusProps<T extends UserActionMap<any>> = Omit<\n    CapoDappStatus<T>,\n    \"message\" | \"nextAction\"\n> & {\n    nextAction?: string & keyof T;\n};\n\n/**\n * @public\n */\nexport type propsType<CapoType extends Capo<any>> = {\n    capoClass: stellarSubclass<CapoType>;\n    targetNetwork: \"preview\" | \"preprod\" | \"mainnet\";\n    dAppName?: string;\n    supportedWallets?: string[];\n    hydra?: boolean | Omit<HydraClientOptions, \"isForMainnet\">;\n    blockfrostKey: string;\n    ogmiosConnections?: Record<submitterName, simpleOgmiosConn>;\n    otherSubmitters?: namedSubmitters;\n    /**\n     * indicates DOM id's in which the status, details and wallet info should be displayed\n     * @remarks\n     * If set to \"headless\", the provider will not render any UI elements.\n     *\n     * If unset, the provider will render status, userDetails and walletInfo in dom elements\n     * of those same names.\n     *\n     * If these portals are not present, placeholder portals will be created and warnings\n     * will be logged to the console.\n     */\n    uiPortals?:\n        | \"headless\"\n        | {\n              capoStatus: string;\n              capoUserDetails: string;\n              txBatchUI: string;\n          };\n\n    /**\n     * Sets initial-page-layout rendering time (in milliseconds) before\n     * the provider will create placeholder portals for capoStatus and capoUserDetails\n     * @remarks\n     * Not used if `uiPortals=` is \"headless\".  If it is explicitly set with portal-ids,\n     * the delay will repeated (up to 10 times) until the portals are found.\n     *\n     * Default is 150ms - should be enough for most apps\n     */\n    portalDelay?: number;\n    onNetwork?: (network: CardanoClient) => void;\n    onUserInfo?: (userInfo: DappUserInfo) => void;\n    onStatusChange?: (status: CapoDappStatus<any>) => void;\n    onSubmitError?: (txd: TxDescription<any, \"built\">) => void;\n    // provider.mkCapoSiteCtx();onContextChange\n\n    onContextChange?: (provider?: CapoDAppProvider<CapoType, any>) => void;\n    onWalletChange?: (wallet: Wallet | undefined) => void;\n    children: React.ReactNode;\n    // ??current-transaction display/state-change hook\n};\n\n/**\n * @remarks\n * @public\n */\nexport type CapoDappProviderState<CapoType extends Capo<any>> = {\n    capo?: CapoType;\n    networkParams?: NetworkParams;\n\n    status: CapoDappStatus<any>;\n    userInfo: DappUserInfo;\n\n    walletHelper?: WalletHelper<Wallet>;\n    walletUtxos?: TxInput[];\n    txBatcher?: TxBatcher;\n    // showDetail?: string;\n    tcx?: StellarTxnContext<any>;\n    bf?: BlockfrostV0Client;\n    dAppName?: string;\n};\n\n/**\n * @public\n */\nexport type SetWalletDetails = {\n    walletName: string;\n    simpleWallet?: SimpleWallet;\n    cip30WalletHandle?: Cip30FullHandle;\n    autoNext?: boolean;\n};\n\n/**\n * A react component providing services for a dApp using Stellar Contracts\n * @remarks\n * The dApp provider helps dApp developers by managing the lifecycle\n * of wallet connections, user roles, and transaction-processing.\n *\n * It provides default UI elements for status messages and error reporting,\n * while allowing developers to customize the user experience with their own\n * overridden presentation.\n *\n * It supports useState()-compatible state updates via its `onStatusChange=`,\n * `onUserInfo=`, and `onSetCapo=` props.  Alternatively, it can be subclassed\n * and its default renderers overridden for another style of customizing.\n *\n * use the `uiPortals=` prop to provide dom id's for each type of UI element, if you want\n * to place or style them in a specific location in your layout.  Otherwise, you can simply\n * place (styled or unstyled) <div id=\"{capoStatus, capoUserDetails, txBatchUI}\"> elements in your layout,\n *  and the provider's version of those elements will be rendered into your portals.\n *\n * We recommend providing color themes matching your app's branding; all the provided\n * UI elements are styled with tailwind classes that reference those theme colors.\n *\n * @public\n */\nexport class CapoDAppProvider<\n    CapoType extends Capo<any>,\n    UserActions extends UserActionMap<any> = BaseUserActionMap\n> extends Component<propsType<CapoType>, CapoDappProviderState<CapoType>> {\n    bf: BlockfrostV0Client;\n    // bfFast: TxChainBuilder & BlockfrostV0Client;\n    capoClass: stellarSubclass<CapoType>;\n    static notProse = true;\n    i: number = 0;\n    didWarnDappName = false;\n    get dAppName() {\n        if (!this.props.dAppName && !this.didWarnDappName) {\n            console.warn(\n                \"using generic dAppName.  Override it in props `dAppName=`, if you wish\"\n            );\n            this.didWarnDappName = true;\n            return \"dApp contract\";\n        }\n        return this.props.dAppName;\n    }\n    constructor(props: propsType<CapoType>) {\n        super(props);\n        this.capoClass = props.capoClass;\n        this.i = mountCount += 1;\n        this.bootstrapCapo = this.bootstrapCapo.bind(this);\n        this.connectCapo = this.connectCapo.bind(this);\n\n        this.updateStatus = this.updateStatus.bind(this);\n        this.reportError = this.reportError.bind(this);\n        this.renderRoleInfo = this.renderRoleInfo.bind(this);\n        this.renderActionButton = this.renderActionButton.bind(this);\n        this.renderWalletInfo = this.renderWalletInfo.bind(this);\n        this.renderProgressBar = this.renderProgressBar.bind(this);\n        this.renderPersistentMessage = this.renderPersistentMessage.bind(this);\n        this.renderNotification = this.renderNotification.bind(this);\n        this.renderErrorStatus = this.renderErrorStatus.bind(this);\n\n        this.connectWallet = this.connectWallet.bind(this);\n        this.bf = makeBlockfrostV0Client(\n            props.targetNetwork,\n            props.blockfrostKey\n        );\n        this.state = {\n            status: {\n                message: `... connecting to ${this.dAppName} ...`,\n                keepOnscreen: true,\n                ready: false,\n\n                developerGuidance:\n                    \"... discovering the on-chain status e.g. from blockfrost\",\n            },\n            userInfo: {\n                roles: [],\n                foundNetworkName: \"\",\n                connectingWallet: false,\n            },\n            txBatcher: undefined,\n            bf: this.bf,\n            dAppName: this.dAppName,\n        };\n        // this.bfFast = makeTxChainBuilder(this.bf);\n    }\n\n    componentDidUpdate(\n        prevProps: propsType<CapoType>,\n        prevState: CapoDappProviderState<CapoType>\n    ) {\n        if (prevProps.dAppName !== this.props.dAppName) {\n            this.setState({ dAppName: this.dAppName });\n        }\n        const { capo, userInfo, status } = this.state;\n        if (this.props.onUserInfo && userInfo !== prevState.userInfo) {\n            this.props.onUserInfo(userInfo);\n        }\n        if (this.props.onStatusChange && status !== prevState.status) {\n            this.props.onStatusChange(status);\n        }\n        if (this.props.onContextChange && capo !== prevState.capo) {\n            this.props.onContextChange(this);\n        }\n        if (\n            this.props.onWalletChange &&\n            userInfo.wallet !== prevState.userInfo.wallet\n        ) {\n            this.props.onWalletChange(userInfo.wallet);\n        }\n    }\n\n    supportedWallets() {\n        return [\"eternl\", \"zwallet\"];\n    }\n\n    isWalletSupported(wallet: string) {\n        const supported =\n            this.props.supportedWallets ?? this.supportedWallets();\n\n        return supported.includes(wallet);\n    }\n\n    walletIsAvailable(wallet: string) {\n        if (wallet === \"zwallet\") {\n            return true;\n        }\n        return !!(window as any).cardano?.[wallet];\n    }\n\n    render() {\n        let {\n            tcx,\n            capo,\n            walletUtxos,\n            walletHelper,\n            userInfo: { wallet, connectingWallet, roles, memberUut },\n            status: {\n                moreInstructions,\n                message,\n                progressBar,\n                progressPercent,\n                keepOnscreen,\n                clearAfter,\n                isError,\n            },\n        } = this.state;\n        const { children = <></>, uiPortals, portalDelay } = this.props;\n\n        if (\"headless\" == uiPortals) {\n            return (\n                <CapoDappProviderContext.Provider value={this}>\n                    {children}\n                </CapoDappProviderContext.Provider>\n            );\n        }\n\n        let results: React.ReactNode = children;\n        // if (isError) {\n        //     results = <>\n        //         {/* <div>Fix the problem before continuing.</div> */}\n        //         {children}\n        //     </>;\n        // }\n\n        // const loading = <Progress key={status}>loading</Progress>;\n        const walletInfo = this.renderWalletInfo();\n        const showProgressBar = !!progressBar;\n\n        const roleInfo = this.renderRoleInfo();\n        const capoInfo =\n            \"development\" == process.env.NODE_ENV && capo?._bundle?.configuredScriptDetails ? (\n                <div className=\"inline-block flex flex-row\">\n                    {/* show a chip with the capo address, short until expanded on hover */}\n                    {/* leaves space for a hat icon on its left */}\n                    <span className=\"mb-0 pl-2 text-black overflow-hidden max-w-48 hover:max-w-full inline-block rounded border border-slate-500 bg-blue-500 px-2 py-0 text-sm shadow-none outline-none hover:cursor-text\">\n                        Capo&nbsp;{capo.address.toString()}\n                    </span>&nbsp;\n                    {roleInfo}\n                </div>\n            ) : (\n                \"\"\n            );\n        {\n            capoInfo ? \"address: \" + capoInfo : \"\";\n        }\n\n        const portalFallbackMessage = {\n            fallbackHelp:\n                \"CapoDAppProvider: set the uiPortals= prop and/or provide the expected portal elements in the DOM\",\n        };\n        // const inviteLink = roles?.includes(\"admin\") ? this.inviteButton() : \"\";\n        const userDetails = (\n            <InPortal\n                key=\"capoUserDetails\"\n                domId={uiPortals?.capoUserDetails ?? \"capoUserDetails\"}\n                maxRetries={uiPortals ? 10 : 1}\n                fallbackLocation=\"top\"\n                {...{ delay: portalDelay, portalFallbackMessage }}\n            >\n                {capoInfo}\n                {walletInfo}\n                {/* {inviteLink} */}\n            </InPortal>\n        );\n\n        const txBatchUI = (\n            <InPortal\n                key=\"txBatchUI\"\n                domId={uiPortals?.txBatchUI ?? \"txBatchUI\"}\n                fallbackLocation=\"top\"\n            >\n                <TxBatchUI />\n            </InPortal>\n        );\n\n        const progressLabel = \"string\" == typeof progressBar ? progressBar : \"\";\n\n        const renderedStatus =\n            (message && (\n                <InPortal\n                    key=\"capoStatus\"\n                    domId={uiPortals?.capoStatus ?? \"capoStatus\"}\n                    fallbackLocation=\"bottom\"\n                    {...{ delay: portalDelay, portalFallbackMessage }}\n                >\n                    <div className=\"z-40 opacity-60\">\n                        {showProgressBar\n                            ? this.renderProgressBar(\n                                  progressLabel,\n                                  progressPercent\n                              )\n                            : \"\"}\n                        {isError\n                            ? this.renderErrorStatus()\n                            : keepOnscreen\n                            ? this.renderPersistentMessage()\n                            : this.renderNotification()}\n                    </div>\n                </InPortal>\n            )) ||\n            \"\";\n\n        return (\n            <ClientSideOnly\n                children={\n                    <CapoDappProviderContext.Provider value={this}>\n                        <div>\n                            {renderedStatus}\n                            {userDetails}\n                            {txBatchUI}\n                            {results as any}\n                        </div>\n                    </CapoDappProviderContext.Provider>\n                }\n            />\n        );\n    }\n\n    /**\n     * Renders a progress bar with a label and optional percentage\n     * @remarks\n     * The progress bar will be indeterminate if no percentage is provided,\n     * showing an indicator of activity without a specific completion percentage.\n     */\n    renderProgressBar(\n        progressLabel: string,\n        progressPercent?: number\n    ): React.ReactNode {\n        const pp: any = progressPercent ? { progressPercent } : {};\n\n        return (\n            <Progress key=\"capoProgress\" {...pp}>\n                {progressLabel}\n            </Progress>\n        );\n    }\n\n    /**\n     * Renders a message when the current status indicates that the\n     * user should take some action before continuing, or that the material\n     * should persist onscreen.\n     * @remarks\n     *\n     * Customizers may override this method to provide a different presentation\n     * than the default.\n     *\n     * The resulting React elements will be rendered using the InPortal component\n     * to direct the presentation into the right area of your application layout.\n     *\n     * The `message` and `moreInstructions` fields SHOULD normally be displayed\n     * for the user.\n     *\n     * Customizers SHOULD always call \\{this._renderNextAction\\(\\)\\}, which will render\n     * a button for any next recommended action (if applicable) for the user to take.\n     * To customize the action button, override `renderActionButton()`.\n     *\n     * ### More about message notifications\n     *\n     * Depending on the details of the current status (the `keepOnscreen` flag),\n     * either this method or renderNotification() will be called to display the status\n     * message. Developers may override one, the other, or both to customize the\n     * presentation of the messages.\n     *\n     * If the `developerGuidance` field is present for any given message, it SHOULD NOT\n     * be displayed in the UI, but can help developers determine how they may guide the\n     * user.  In a `development` environment, you MAY wish to show the `developerGuidance`\n     * onscreen as well.\n     *\n     */\n    renderPersistentMessage(): React.ReactNode {\n        const {\n            status: { moreInstructions, message, isError },\n        } = this.state;\n        const statusClass =\n            //  !isError\n            //     ? \"font-bold bg-red-800 text-orange-200\" :\n            \"bg-blue-300 border-blue-500 text-black font-bold dark:bg-blue-900 dark:text-blue-300\";\n        return (\n            <div\n                className={`flex ${\n                    isError ? \"isError\" : \"\"\n                } flex-row w-full status`}\n                key=\"persistentMessage\"\n                role=\"banner\"\n            >\n                <div className=\"flex-grow\">\n                    <span key=\"status\" className=\"block sm:inline\">\n                        {message}\n                    </span>\n                    {moreInstructions && (\n                        <div className=\"mt-2 text-sm text-gray-700 dark:text-gray-300 italic\">\n                            {moreInstructions}\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"m-2\">{this.renderNextAction()}</div>\n            </div>\n        );\n    }\n\n    /**\n     * Renders a message when the current status indicates that the\n     * the message is transient and should be cleared after a short time.\n     * @remarks\n     *\n     * By default, this method presents using the renderPersistentMessage() method,\n     * though customizers may override this method to provide a different presentation.\n     *\n     * The provider will automatically update the state to clear the status message\n     * after this indicated `clearAfter` time has elapsed.  Customizers using tools\n     * that spawn their own notification elements (such as \"toast\" notifications)\n     * should feed the `clearAfter` value into their notification system, and may\n     * need to ensure a correct response the message-clearing update (if you get\n     * empty toast, you didn't do it right : ).\n     *\n     * Overriding only renderPersistentMessage() will affect both transient and persistent\n     * messages.  Overriding only renderNotification() will affect only transient messages.\n     *\n     * ### More about message notifications\n     *\n     * Depending on the details of the current status (the `keepOnscreen` flag),\n     * either this method or renderPersistentMessage() will be called to display\n     * the status message.  Developers may override one, the other, or both to\n     * customize the presentation of the messages.\n     *\n     * The resulting React elements will be rendered using the InPortal component\n     * to direct the presentation into the 'capoStatus' portal element in your application layout.\n     */\n    renderNotification(): React.ReactNode {\n        return this.renderPersistentMessage();\n    }\n\n    /**\n     * Renders a message when the current status indicates that an error has occurred\n     * @remarks\n     * Customizers may override this method to provide a different presentation for this case.\n     *\n     * This method SHOULD present the `message` and `moreInstructions` fields to the\n     * user, indicate a clear error status for visual purposes, and include `{this._renderNextAction()}`\n     * to display any recommended next action for the user to take (customize the button by overriding\n     * `renderActionButton()`).\n     *\n     * Customizers SHOULD also provide a role=\"alert\" attribute for accessibility purposes.\n     *\n     * The resulting React elements will be rendered using the InPortal component\n     * to the 'capoStatus' portal element in your application layout.\n     */\n    renderErrorStatus() {\n        const {\n            status: { moreInstructions, message },\n        } = this.state;\n        return (\n            <div\n                className=\"flex flex-row w-full error relative left-0 top-0 rounded p-1 font-bold bg-[#e7560a] text-black\"\n                role=\"alert\"\n                key=\"errorStatus\"\n            >\n                <div className=\"\">\n                    <strong className=\"font-bold\">Whoops! &nbsp;&nbsp;</strong>\n                    <span key=\"status-err\" className=\"block sm:inline\">\n                        {message!.split(\"\\n\").map((line, i) => (\n                            <React.Fragment key={`line-${i}`}>\n                                {line}\n                                <br />\n                            </React.Fragment>\n                        ))}\n                    </span>\n                    <div className=\"text-sm italic\">{moreInstructions}</div>\n                </div>\n\n                <div className=\"mr-2 flex-grow text-nowrap\">\n                    {this.renderNextAction()}\n                </div>\n            </div>\n        );\n    }\n\n    renderNextAction() {\n        const {\n            status: {\n                nextAction: {\n                    key: actionKey,\n                    label: actionMessage,\n                    trigger: actionTrigger,\n                } = {},\n            },\n        } = this.state;\n\n        if (!actionKey) return;\n        if (!actionTrigger) {\n            console.error(\"no action trigger for next action\", actionKey);\n            return;\n        }\n        return this.renderActionButton(actionKey, actionTrigger, actionMessage);\n    }\n\n    renderActionButton(\n        actionKey: string,\n        actionTrigger: MouseEventHandler<HTMLButtonElement>,\n        actionMessage?: string\n    ) {\n        return (\n            <button\n                className=\"btn float-right ml-1 rounded-md border-2 border-amber-800 bg-blue-900 p-2 text-white hover:bg-blue-600 dark:border-amber-700 dark:bg-blue-200 dark:text-black dark:hover:bg-blue-50\"\n                onClick={actionTrigger}\n            >\n                {actionMessage || this.userActions[actionKey].label}\n            </button>\n        );\n    }\n\n    /**\n     * displays a list of detected user roles\n     * @remarks\n     * This method is called by the default render() method to display the user's roles.\n     *\n     * Customizers may override this method to provide a different presentation for the user's roles.\n     * The default implementation simply emits a list of role tags using react fragments,\n     * with no additional envelope or decoration.  If you do this, you SHOULD call\n     * renderRoleTag() to display each individual role tag.\n     *\n     * To customize individual role tags, override `renderRoleTag()` instead.\n     *\n     * The resulting React elements are normally included in the capoUserInfo portal element.\n     * Customizers may use this method directly if using the \"headless\" uiPortals option.\n     */\n    renderRoleInfo() {\n        const {\n            userInfo: { roles },\n        } = this.state;\n        if (!roles) return;\n\n        return (\n            <>\n                {roles.map((r) => {\n                    return (\n                        <Fragment key={`role-${r}`}>\n                            {this.renderRoleTag(r)}\n                        </Fragment>\n                    );\n                })}\n            </>\n        );\n    }\n\n    /**\n     * displays a single role tag detected for the current user\n     * @remarks\n     * This method is called by the default renderRoleInfo() method to display a single role tag.\n     */\n    renderRoleTag(role: string) {\n        return (\n            <span className=\"ml-1 mb-0 inline-block rounded border border-slate-500 bg-emerald-800 px-2 py-0 text-sm text-slate-400 shadow-none outline-none transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:cursor-text\">\n                {role}\n            </span>\n        );\n    }\n\n    // doAction(action) {\n    //     const actions = {\n    //         initializeCapo: this.bootstrapCapo,\n    //         retryCreation: this.connectCapo,\n    //     };\n    //     const thisAction = actions[action];\n    //     thisAction.call(this);\n    // }\n\n    /**\n     * renders a lightweight wallet connection button.\n     * @remarks\n     * It's recommended to override this method to present your preferred\n     * wallet connection button.\n     *\n     * When you detect a wallet change, call the `setWallet()` method to\n     * notify the dApp.\n     */\n    renderWalletInfo() {\n        const {\n            userInfo: {\n                wallet,\n                walletAddress,\n                connectingWallet,\n                foundNetworkName,\n                selectedWallet,\n            },\n        } = this.state;\n\n        let autoWallet = selectedWallet;\n        if (\n            \"undefined\" !== typeof window &&\n            typeof selectedWallet === \"undefined\"\n        ) {\n            autoWallet =\n                window.localStorage.getItem(\"capoAutoConnectWalletName\") || \"\";\n        }\n\n        if (wallet) {\n            return (\n                <div className=\"flex flex-row\">\n                    {walletAddress && (\n                        <span\n                            key=\"chip-walletAddr\"\n                            // make it small by default, but allow it to grow on hover\n                            // also, make it right-aligned and chop the overflow\n                            // color the text black\n                            className=\"mb-0 text-black text-nowrap overflow-hidden max-w-24 hover:max-w-full inline-block rounded border border-slate-500 bg-blue-500 px-2 py-0 text-sm shadow-none outline-none hover:cursor-text\"\n                        >\n                            {walletAddress} {selectedWallet}\n                            <a\n                                href=\"#\"\n                                onClick={() => this.newWalletSelected(\"\")}\n                            >\n                                ✖️\n                            </a>\n                        </span>\n                    )}\n                    &nbsp;\n                    <span\n                        key=\"chip-networkName\"\n                        className=\"mb-0 inline-block rounded border border-slate-500 bg-blue-900 px-2 py-0 text-sm text-slate-400 shadow-none outline-none transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:cursor-text\"\n                    >\n                        {foundNetworkName}\n                    </span>\n                </div>\n            );\n        } else if (connectingWallet) {\n            return (\n                <div>\n                    <Button variant=\"secondary\" disabled className=\"-mt-3\">\n                        ... connecting ...\n                    </Button>\n                </div>\n            );\n        } else {\n            return (\n                <div>\n                    <select value={autoWallet} onChange={this.onWalletChange}>\n                        <option value=\"\"> -- choose wallet -- </option>\n                        <option value=\"zwallet\">Zero Wallet</option>\n                        <option value=\"eternl\">Eternl</option>\n                    </select>\n                    <Button\n                        variant=\"secondary\"\n                        className=\"-mt-3\"\n                        onClick={this.onConnectButton}\n                    >\n                        Connect Wallet\n                    </Button>\n                </div>\n            );\n        }\n    }\n\n    onWalletChange: ChangeEventHandler<HTMLSelectElement> = (event) => {\n        this.newWalletSelected(event.target.value);\n        event.preventDefault();\n    };\n\n    onConnectButton: MouseEventHandler<HTMLButtonElement> = async (event) => {\n        this.connectWallet();\n    };\n\n    // txnDump() {\n    //     const { tcx } = this.state;\n    //     if (!tcx) return;\n\n    //     const built = await tcx.build();\n    //     const txnDump = tcx.dump();\n    //     {\n    //         txnDump && (\n    //             <pre\n    //                 style={{\n    //                     color: \"#999\",\n    //                     border: \"1px dashed #505\",\n    //                     borderRadius: \"0.5em\",\n    //                 }}\n    //             >\n    //                 {txnDump}\n\n    //                 {tcx.state.bsc &&\n    //                     JSON.stringify(tcx.state.bootstrappedConfig, null, 2)}\n    //             </pre>\n    //         );\n    //     }\n    // }\n\n    //  ---- Component setup sequence starts here\n    //  -- step 1: get blockfrost's network params\n    async componentDidMount() {\n        // in dev environment, React re-mounts the same component : /\n        if (this._unmounted) this._unmounted = false;\n\n        if (this._unmounted) {\n            // debugger;\n            return;\n        }\n\n        this._isInitializing = this._isInitializing || this.doInitialize();\n    }\n    _isInitializing: Promise<any> | undefined = undefined;\n    async doInitialize() {\n        const networkParams: NetworkParams = await this.bf.parameters;\n\n        if (\"undefined\" != typeof window) {\n            const autoWallet = window.localStorage.getItem(\n                \"capoAutoConnectWalletName\"\n            );\n            if (autoWallet) {\n                await this.newWalletSelected(autoWallet, false);\n            }\n        }\n\n        // await this.updateState('connecting to wallet', {\n        await this.updateStatus(\n            \"initializing on-chain contracts\",\n            {\n                developerGuidance: \"status message for the user\",\n            },\n            \"//component did mount\",\n            {\n                networkParams,\n            }\n        );\n        if (this.props.onNetwork) this.props.onNetwork(this.bf);\n        if (this.props.onStatusChange)\n            this.props.onStatusChange(this.state.status);\n        if (this.props.onUserInfo) this.props.onUserInfo(this.state.userInfo);\n\n        if (this.props.onContextChange) this.props.onContextChange(this);\n        // if (this.props.onWalletChange) this.props.onWalletChange(undefined);\n\n        await this.updateStatus(\n            \"setting up tx submitters\",\n            {\n                developerGuidance: \"just show the message to the user\",\n            },\n            \"//setupSubmitters\"\n        );\n        await this.setupSubmitters();\n\n        this.connectCapo();\n    }\n    submitters: namedSubmitters = {};\n\n    async setupSubmitters() {\n        this.submitters = {\n            blockfrost: this.bf,\n            ...(this.props.otherSubmitters || {}),\n        };\n        for (const [name, conn] of Object.entries(\n            this.props.ogmiosConnections || {}\n        )) {\n            if (name in this.submitters) {\n                throw new Error(\n                    `ogmios submitter ${name} conflicts with other implied or provided submitter`\n                );\n            }\n\n            this.submitters[name] = await OgmiosTxSubmitter.withOgmiosConn(\n                this.isMainnet(),\n                conn\n            );\n        }\n        const { promise, resolve } = Promise.withResolvers();\n        const { networkParams, userInfo: { wallet } = {} } = this.state;\n        if (!networkParams) {\n            throw new Error(\"network params not available\");\n        }\n\n        // const wallet = makeCip30Wallet(walletHandle);\n        // const {txBatcher} = this.state\n        // if (txBatcher) {\n        //     txBatcher.signingStrategy = new GenericCip30Signer(wallet)\n        // }\n\n        const txBatcherOptions: TxBatcherOptions = {\n            submitters: this.submitters,\n        };\n        if (wallet) {\n            txBatcherOptions.signingStrategy = new GenericSigner(wallet);\n        }\n        this.setState(\n            {\n                txBatcher: new TxBatcher(txBatcherOptions),\n                // , {\n                //     network: this.bf,\n                //     networkParams,\n                // }),\n            },\n            () => resolve(\"\")\n        );\n\n        return promise;\n    }\n\n    _unmounted = false;\n    async componentWillUnmount() {\n        this._unmounted = true;\n\n        // not really an error - just big and red so it's super obvious when it happens\n        console.error(\"capo dApp provider unmounted\");\n    }\n\n    /**\n     * @internal\n     */\n    newWalletSelected(selectedWallet: string = \"eternl\", autoNext = true) {\n        if (selectedWallet === \"\") {\n            return this.updateStatus(\n                \"disconnecting from wallet\",\n                {\n                    developerGuidance: \"just a status message for the user\",\n                },\n                \"//disconnecting wallet\",\n                {\n                    userInfo: {\n                        ...this.state.userInfo,\n                        selectedWallet: \"\",\n                        wallet: undefined,\n                        walletAddress: undefined,\n                        walletHandle: undefined,\n                    },\n                }\n            );\n        }\n        if (!this.isWalletSupported(selectedWallet)) {\n            debugger;\n            this.reportError(\n                new Error(\"wallet not supported\"),\n                `selected wallet '${selectedWallet}' not supported`,\n                {\n                    developerGuidance:\n                        \"let the user know to install the wallet plugin\",\n                }\n            );\n            return;\n        }\n\n        if (!this.walletIsAvailable(selectedWallet)) {\n            this.reportError(\n                new Error(`wallet '${selectedWallet}' not available`),\n                `selected wallet '${selectedWallet}' isn't activated - enable the browser extension to continue`,\n                {\n                    developerGuidance:\n                        \"let the user know to install the wallet plugin\",\n                }\n            );\n            return;\n        }\n\n        return new Promise<void>((resolve) => {\n            this.setState(\n                {\n                    userInfo: {\n                        ...this.state.userInfo,\n                        selectedWallet,\n                    },\n                },\n                () => resolve()\n            );\n        }).then(() => {\n            return this.connectWallet(autoNext);\n        });\n    }\n\n    get userInfo() {\n        return this.state.userInfo;\n    }\n\n    //  -- step 2: connect to Cardano wallet\n    walletConnectPromise?: Promise<any>;\n\n    async connectWallet(autoNext = true, retries = 5) {\n        const {\n            userInfo,\n            userInfo: { wallet: alreadyConnected, selectedWallet = \"eternl\" },\n            capo,\n        } = this.state;\n        if (this._unmounted) {\n            debugger;\n            return true;\n        }\n        if (alreadyConnected) return true;\n\n        if (!this.isWalletSupported(selectedWallet)) {\n            this.reportError(\n                new Error(`wallet '${selectedWallet}' not supported`),\n                `selected wallet '${selectedWallet}' isn't supported`,\n                {\n                    developerGuidance:\n                        \"let the user know to install the wallet plugin\",\n                }\n            );\n            return;\n        }\n        if (!this.walletIsAvailable(selectedWallet)) {\n            this.reportError(\n                new Error(`wallet '${selectedWallet}' not available`),\n                `selected wallet '${selectedWallet}' isn't activated - enable the browser extension to continue`,\n                {\n                    developerGuidance:\n                        \"let the user know to install the wallet plugin\",\n                }\n            );\n            return;\n        }\n        //! it suppresses lame nextjs/react-sourced double-trigger of mount sequence\n        // if (this._unmounted) return\n        // debugger\n        if (this.walletConnectPromise) {\n            console.warn(\n                \"suppressing redundant wallet connect, already pending\"\n            );\n\n            return this.walletConnectPromise;\n        }\n\n        await this.updateStatus(\n            \"connecting to Cardano wallet\",\n            {\n                progressBar: true,\n                developerGuidance: \"just a status message for the user\",\n            },\n            \"//connecting wallet\",\n            {\n                userInfo: { ...userInfo, connectingWallet: true },\n            }\n        );\n        let simpleWallet: SimpleWallet | undefined;\n        let walletHandle: Cip30FullHandle | undefined;\n        if (selectedWallet === \"zwallet\") {\n            let privKeyHex = window.localStorage.getItem(\"zwk\");\n            if (!privKeyHex) {\n                const entropy = makeRandomRootPrivateKey().entropy;\n                privKeyHex = bytesToHex(entropy);\n                window.localStorage.setItem(\"zwk\", privKeyHex);\n            }\n            const privKey = makeRootPrivateKey(hexToBytes(privKeyHex));\n            // console.log(privKey.toPhrase());\n\n            // const capo = this.state.capo;\n            // if (!capo) {\n            //     throw new Error(\"capo not initialized\")\n            // }\n            const isMainnet = this.props.targetNetwork === \"mainnet\";\n            const useHydra = !!this.props.hydra;\n            const hydraOptions: HydraClientOptions | undefined = useHydra\n                ? ({\n                      ...(this.props.hydra === true ? {} : this.props.hydra),\n                      isForMainnet: isMainnet,\n                  } as any)\n                : undefined;\n            let networkClient = useHydra\n                ? makeHydraClient(WebSocket, {\n                      onReceive(message) {\n                          console.log(\"onReceive\", message);\n                      },\n                      isForMainnet: isMainnet,\n                      ...hydraOptions,\n                  })\n                : this.bf;\n            simpleWallet = makeSimpleWallet(privKey, networkClient);\n            if (this.capo) {\n                this.capo.setup.network = networkClient;\n            }\n        } else {\n            if (!!this.props.hydra) {\n                throw new Error(\"hydra not supported for this wallet\");\n            }\n            const connecting = (this.walletConnectPromise =\n                //@ts-expect-error on Cardano\n                window.cardano[selectedWallet]?.enable());\n            walletHandle = await connecting.catch((e: any) => {\n                simpleWallet = undefined;\n\n                // eternl plugin seems to have a race for initializing\n                // the wallet connection, when we do auto-connect.\n                if (!!retries && e.message.match(/no account set/)) {\n                    const delay = Math.pow(1.6, 5 - retries) * 200;\n                    return new Promise((res) => setTimeout(res, delay)).then(\n                        () => {\n                            return this.connectWallet(autoNext, retries - 1);\n                        }\n                    );\n                }\n                this.reportError(e, \"wallet connect\", {\n                    developerGuidance:\n                        \"guide the user to get connected to a supported wallet plugin\",\n                });\n            });\n\n            if (!walletHandle) return;\n        }\n\n        return this.setWallet({\n            cip30WalletHandle: walletHandle,\n            simpleWallet: simpleWallet,\n            walletName: selectedWallet,\n            autoNext,\n        });\n    }\n\n    /**\n     * allows setting the wallet for the dApp from a CIP-30 wallet handle\n     * @remarks\n     * if your application has its own UI for the user to choose their wallet and connect or disconnect,\n     * call this method any time a new wallet is selected.\n     * @public\n     */\n    async setWallet(details: SetWalletDetails) {\n        let {\n            walletName,\n            simpleWallet,\n            cip30WalletHandle: walletHandle,\n            autoNext = true,\n        } = details;\n        if (!simpleWallet && !walletHandle) {\n            debugger;\n            throw new Error(\"wallet or walletHandle is required\");\n        }\n\n        let wallet: Wallet | undefined = simpleWallet;\n        let addrString: string | undefined;\n        console.warn(\"CIP-30 Wallet Handle\", walletHandle);\n\n        let foundNetworkName: string | undefined;\n        if (walletHandle) {\n            const netId = await walletHandle.getNetworkId();\n            const addr = (await walletHandle.getUsedAddresses())[0];\n            addrString = addr;\n            foundNetworkName = networkNames[netId];\n            if (foundNetworkName !== this.props.targetNetwork) {\n                return this.updateStatus(\n                    `This application is only available on the ${this.props.targetNetwork} network.  Your wallet is connected to network ${netId} (${foundNetworkName})`,\n                    {\n                        isError: true,\n                        developerGuidance:\n                            \"when the user switches networks, the dApp should automatically(?) reconnect\",\n                    },\n                    \"//wallet not on expected network\",\n                    {\n                        userInfo: {\n                            ...this.userInfo,\n                            connectingWallet: false,\n                            walletAddress: addrString,\n                            foundNetworkName: foundNetworkName || \"‹unknown›\",\n                        },\n                    }\n                );\n            }\n\n            if (this.bf.networkName !== foundNetworkName) {\n                //! checks that wallet network matches network params / bf\n                this.updateStatus(\n                    `wallet network mismatch; expected ${this.bf.networkName}, wallet ${foundNetworkName}`,\n                    {\n                        isError: true,\n                        developerGuidance:\n                            \"the dApp should automatically(?) reconnect when the user switches networks\",\n                    },\n                    \"//wallet network doesn't match bf network\",\n                    {\n                        userInfo: {\n                            ...this.userInfo,\n                            connectingWallet: false,\n                            walletAddress: addrString,\n                            foundNetworkName,\n                        },\n                    }\n                );\n                return;\n            }\n            wallet = makeCip30Wallet(walletHandle);\n        } else {\n            if (!simpleWallet) {\n                throw new Error(\"wallet not found\"); // for TypeScript\n            }\n            wallet = simpleWallet;\n            foundNetworkName = this.props.targetNetwork;\n            if (this.capo) {\n                this.capo.setup.network = simpleWallet.cardanoClient;\n                this.capo.setup.actorContext.wallet = wallet;\n            }\n            const networkParams = await simpleWallet.cardanoClient.parameters;\n            const addr = (await wallet.usedAddresses)[0];\n            addrString = addr.toString();\n            await this.updateStatus(\n                \"connected with zero-wallet\",\n                {\n                    developerGuidance: \"status message for the user\",\n                },\n                \"// zero-wallet connected\",\n                {\n                    networkParams,\n                    userInfo: {\n                        ...this.userInfo,\n                        connectingWallet: false,\n                        wallet,\n                        walletAddress: addrString,\n                    },\n                }\n            );\n        }\n        if (!wallet) {\n            throw new Error(\"wallet not found\"); // for TypeScript\n        }\n        const { txBatcher } = this.state;\n\n        if (txBatcher) {\n            txBatcher.signingStrategy = new GenericSigner(wallet);\n        }\n\n        const walletHelper = makeWalletHelper(wallet);\n        if (\"undefined\" !== typeof window) {\n            if (\n                window.localStorage.getItem(\"capoAutoConnectWalletName\") !==\n                walletName\n            ) {\n                window.localStorage.setItem(\n                    \"capoAutoConnectWalletName\",\n                    walletName\n                );\n            }\n        }\n\n        const newState: UpdateStateProps = {\n            userInfo: {\n                ...this.userInfo,\n                wallet,\n                walletHandle,\n                selectedWallet: walletName,\n                connectingWallet: false,\n                foundNetworkName,\n                walletAddress: addrString,\n            },\n            walletHelper,\n        };\n        await this.updateStatus(\n            \"finding collateral and other wallet utxos\",\n            {\n                developerGuidance: \"show status message onscreen\",\n                clearAfter: 5000,\n                progressBar: true,\n            },\n            \"//finding wallet utxos & collateral\",\n            newState\n        );\n\n        if (this.capo) this.capo.actorContext.wallet = wallet;\n\n        await walletHelper.utxos.then((walletUtxos: TxInput[]) => {\n            return this.updateStatus(\n                undefined,\n                {\n                    developerGuidance:\n                        \"nothing to do here but clear an existing status message (if needed)\",\n                },\n                \"//found wallet utxos\",\n                {\n                    walletUtxos,\n                }\n            );\n        });\n\n        if (\n            (this.state.networkParams && autoNext && !this.state.capo) ||\n            !(await this.state.capo?.isConfigured)\n        ) {\n            await this.updateStatus(\n                `reconnecting to ${this.dAppName} with connected wallet`,\n                {\n                    developerGuidance: \"status message for the user\",\n                },\n                \"//reinit after wallet\"\n            );\n            return this.connectCapo(autoNext);\n        }\n    }\n\n    async checkWalletTokens() {\n        const { capo } = this.state;\n        if (!capo?.actorContext.wallet) {\n            await this.updateStatus(\n                \"no capo yet, or not connected to wallet\",\n                {\n                    developerGuidance:\n                        \"wait for the wallet to be connected before calling checkWalletTokens\",\n                },\n                \"/// no capo or wallet; skipping scan for authority tokens\"\n            );\n            return;\n        }\n\n        await this.updateStatus(\n            \"checking wallet for authority tokens \",\n            {\n                progressBar: true,\n                developerGuidance: \"status message for the user\",\n                ready: false,\n            },\n            \"/// looking for authority tokens  from policy \" + capo.mph.toHex()\n        );\n\n        const roles: (\"member\" | \"admin\")[] = [];\n        //@ts-ignore - for now - only works if capo uses member info\n        const member = await capo.findMemberInfo?.();\n        const isAdmin = await capo.findActorUut(\"capoGov\");\n\n        let memberUut;\n        if (!!member) {\n            memberUut = member.uut;\n\n            roles.push(\"member\" as const);\n        }\n        if (!!isAdmin) roles.push(\"admin\" as const);\n\n        const message = roles.includes(\"member\")\n            ? // || roles.includes(\"admin\")\n              \"\"\n            : this.getStartedMessage();\n\n        this.updateStatus(\n            message,\n            {\n                progressPercent: 100,\n                developerGuidance:\n                    \"display the indicated roles in the UI and/or show/hide app features based on the roles\",\n                ready: true,\n            },\n            `/// found ${roles.length} roles: ${roles.join(\", \")}`,\n            {\n                userInfo: {\n                    ...this.userInfo,\n                    roles,\n                    memberUut,\n                },\n            }\n        );\n    }\n\n    getStartedMessage(): string {\n        return `Hurray!  Users can now start doing their thing. Customize this content in your CapoDappProvider's getStartedMessage() method.`;\n    }\n\n    // -- step 3 - check if the Capo is configured and ready for use\n    async connectCapo(autoNext = true, reset?: \"reset\") {\n        if (this._unmounted) return;\n\n        // const priorVH = \"b30c39d09103f5ed3588adc9179cb957137ffa79568e6a5dfda4e317\"\n        // const addr = helios.Address.fromHashes(new helios.ValidatorHash(priorVH))\n        // window.alert(addr.toBech32())\n\n        // !!! todo: consider a way for clients of this component\n        //  ... to indicate conditions for auto-connect to wallet\n        // if (\"create\" == route || \"edit\" == route) {\n        //     await this.connectWallet();\n        // }\n        let {\n            networkParams,\n            capo,\n\n            userInfo: { wallet },\n        } = this.state;\n\n        let localConfig = null; // window.localStorage.getItem(\"capoConfig\");\n        if (localConfig)\n            try {\n                localConfig = JSON.parse(localConfig);\n\n                console.log(\n                    \"------------------- deploy this -----------------------\\n\",\n                    localConfig,\n                    \"\\n------------------- deploy this! -----------------------\\n\",\n                    \"... by pasting this into your dAPI repo's capo.config.json\"\n                );\n\n                this.updateStatus(\n                    \"using dev-time config from localStorage to load contract ...\",\n                    {\n                        clearAfter: 5000,\n                        moreInstructions:\n                            \"to deploy this configuration, see details in the console\",\n                        developerGuidance:\n                            \"at production time, we'll use the deployed config instead\",\n                    },\n                    \"// dev-time notice\"\n                );\n            } catch (e: any) {\n                return this.reportError(e, \"parsing devCfg from localStorage\", {\n                    nextAction: \"initializeCapo\",\n                    moreInstructions:\n                        \"You can re-initialize the capo to reset the dev config, or deploy a good config using the `cst` command-line tool\",\n                    developerGuidance:\n                        \"If this situation persists, you might need to investigate why the dev config is being written as something non-parseable\",\n                });\n            }\n        let config =\n            !reset && localConfig\n                ? { config: parseCapoJSONConfig(localConfig) }\n                : { }\n                // : { partialConfig: {} };\n\n        if (!wallet) console.warn(\"connecting to capo with no wallet\");\n        if (!networkParams) {\n            console.warn(\"no network params\");\n            return;\n        }\n        type t = ConfigFor<CapoType>;\n        let { txBatcher } = this.state;\n        if (!txBatcher) {\n            const batcherOptions: TxBatcherOptions = {\n                submitters: this.submitters,\n                ...(wallet\n                    ? {\n                          signingStrategy: new GenericSigner(wallet),\n                      }\n                    : {}),\n            };\n\n            txBatcher = new TxBatcher(batcherOptions);\n        }\n\n        let network: CardanoClient = this.bf;\n        //@ts-expect-error - sorry, typescript : /\n        if (this.state.userInfo.wallet?.cardanoClient) {\n            network = (this.state.userInfo.wallet! as SimpleWallet)\n                .cardanoClient;\n            networkParams = await network.parameters;\n        }\n        const setup = {\n            network,\n            networkParams,\n            txBatcher,\n            actorContext: {\n                wallet,\n                others: {},\n            },\n            isMainnet: this.isMainnet(),\n            optimize: true,\n        };\n        txBatcher.setup = setup;\n        let cfg: StellarFactoryArgs<CapoConfig> = {\n            setup: setup,\n            // partialConfig: {},\n            ...config,\n        };\n        try {\n            console.log(\"init with cfg\", cfg);\n            await this.updateStatus(\n                `connecting: ${this.dAppName}`,\n                {\n                    progressBar: true,\n                    developerGuidance:\n                        \"wait for connection; possibly show a spinner\",\n                },\n                \"//init\",\n                {\n                    txBatcher,\n                }\n            );\n\n            const capo = await this.capoClass.createWith(\n                //@ts-expect-error - sorry, typescript : /\n                cfg\n            );\n            const capoBundle = await capo.getBundle();\n            debugger\n            const configured = capoBundle.configuredParams;\n            const { isChartered } = capo;\n\n            if (!configured || !isChartered) {\n                const problem = configured\n                    ? isChartered\n                        ? \"impossible\"\n                        : \"is preconfigured and ready to be chartered!\"\n                    : isChartered\n                    ? \"impossible\"\n                    : \"needs to be configured and chartered.   Add a configuration if you have it, or create the Capo charter now.\";\n\n                const message = autoNext ? `The Capo contract ${problem} ` : \"\";\n\n                await this.updateStatus(\n                    message,\n                    {\n                        nextAction: \"initializeCapo\",\n                        developerGuidance:\n                            \"likely administrative moment for dev-time creation of the capo\",\n                    },\n                    \"//bootstrap needed\",\n                    {\n                        capo,\n                    }\n                );\n                return;\n                // return this.stellarSetup();\n            }\n            capo.actorContext.wallet = wallet;\n            const config = capo._bundle?.configuredScriptDetails?.config as CapoConfig\n            if (capo._bundle?.configuredScriptDetails) {\n                await capo.connectMintingScript(config);\n            } else {\n                console.warn(\"no config yet for this capo (dbpa)\")\n                debugger\n            }\n            if (!autoNext)\n                return this.updateStatus(\n                    \"\",\n                    {\n                        developerGuidance:\n                            \"capture this capo object for use in transaction-building.  See also the dataDelegates...\",\n                    },\n                    \"// Capo is connected to wallet, ready to do an on-chain activity\",\n                    { capo }\n                );\n\n            await this.updateStatus(\n                \"... searching ...\",\n                {\n                    busy: true,\n                    developerGuidance:\n                        \"display a spinner or other indicator that the dApp is doing something\",\n                },\n                \"//searching (or freshening search after wallet connection)\",\n                {\n                    capo: capo,\n                }\n            );\n            this.checkWalletTokens();\n            // this.fetchBookEntries();\n        } catch (error: any) {\n            this.reportError(error, `checking ${this.dAppName} configuration`, {\n                nextAction: \"initializeCapo\",\n                moreInstructions:\n                    \"Developer error: Some error has occurred during initialization of on-chain Capo.\" +\n                        \"development\" ==\n                    process.env.NODE_ENV\n                        ? \"You can try again, or check the console for more information.\"\n                        : `You might need to contact ${this.dAppName}'s support channels for assistance.`,\n                developerGuidance:\n                    \"Check the logs for more information about the error\",\n            });\n        }\n    }\n\n    private isMainnet(): boolean {\n        const isMainnet = !(\n            \"development\" == environment.NODE_ENV ||\n            \"test\" == environment.NODE_ENV ||\n            \"preview\" == environment.CARDANO_NETWORK ||\n            \"preprod\" == environment.CARDANO_NETWORK\n        );\n        console.log(\n            \"isMainnet\",\n            isMainnet,\n            environment.NODE_ENV,\n            environment.CARDANO_NETWORK\n        );\n        return isMainnet;\n    }\n\n    async mkDefaultCharterArgs(): Promise<MinimalCharterDataArgs> {\n        const { walletHelper } = this.state;\n        if (!walletHelper) {\n            debugger;\n            throw new Error(\"no wallet helper\");\n        }\n        const addr = await walletHelper.baseAddress;\n        return {\n            govAuthorityLink: {\n                config: {\n                    //this.capo.stringifyDgtConfig({\n                    addrHint: [addr],\n                },\n            },\n            mintDelegateLink: {\n                config: {},\n            },\n            spendDelegateLink: {\n                config: {},\n            },\n            mintInvariants: [],\n            spendInvariants: [],\n            otherNamedDelegates: new Map(),\n            manifest: new Map(),\n            rev: 1n,\n        };\n    }\n\n    //  -- step 3a - initialize the Capo if needed\n    async bootstrapCapo() {\n        if (!this.userInfo?.wallet) await this.connectWallet(false);\n        await this.connectCapo(false, \"reset\");\n        const {\n            capo,\n            userInfo: { wallet },\n        } = this.state;\n\n        if (!wallet) {\n            debugger;\n            throw new Error(\"no wallet\");\n        }\n        if (!capo) {\n            debugger;\n            throw new Error(\"no capo\");\n        }\n        if (await capo.isConfigured) {\n            return this.reportError(\n                new Error(`Capo already has a deployed configuration`),\n                \"bootstrap\",\n                {\n                    moreInstructions:\n                        \"This is a developer error that should be unreachable\",\n                    developerGuidance:\n                        \"Figure out how this could have happened, and fix the first root cause\",\n                }\n            );\n        }\n\n        await this.updateStatus(\n            \"creating the Capo charter transaction ...\",\n            {\n                progressBar: true,\n                moreInstructions:\n                    \"This could take 60-90 seconds while the contracts are compiled\",\n                developerGuidance:\n                    \"status indicator while the transaction is build.  this might take a second or three.\",\n            },\n            \"//creating charter txn\"\n        );\n\n        let tcx: Awaited<ReturnType<CapoType[\"mkTxnMintCharterToken\"]>>;\n        try {\n            const addresses = await wallet.unusedAddresses;\n            // type Expand<T> =  T extends infer O ? { [K in keyof O]: O[K] } : never;\n            // type tt = Expand<typeof t.state>\n            tcx = await capo.mkTxnMintCharterToken(\n                await this.mkDefaultCharterArgs()\n            );\n        } catch (e: any) {\n            console.error(e);\n\n            this.reportError(e, \"creating charter\", {\n                nextAction: \"retryCreation\",\n                developerGuidance:\n                    \"Make sure you're approving the setup transactions in the wallet, and check the logs to investigate possible other causes of error\",\n            });\n            return;\n        }\n        await this.updateStatus(\n            \"Bootstrap transaction loading into your wallet...\",\n            {\n                progressBar: true,\n                moreInstructions: `If it looks right, sign the transaction to finish chartering the ${this.dAppName}`,\n                developerGuidance:\n                    \"the dApp is waiting for the wallet to sign the bootstrap txn\",\n            },\n            \"/// push bootstrap txn to wallet\",\n            {\n                tcx,\n            }\n        );\n        try {\n            // const paramsOverride: Partial<NetworkParams> = {\n            //     maxTxExCpu: 1000000000000,\n            //     maxTxExMem: 100000000,\n            //     maxTxSize: 49777,\n            // };\n            await tcx.submitAll({\n                // paramsOverride,\n                onSubmitError: (details) => {\n                    this.props.onSubmitError?.(details);\n                },\n                addlTxInfo: {\n                    txName: `${this.dAppName} Charter`,\n                    description: `Bootstrap on-chain contracts for ${this.dAppName}`,\n                    moreInfo: `If this looks right, sign the transaction to finish chartering the ${this.dAppName}`,\n                },\n                fixupBeforeSubmit: ({\n                    tcx,\n                    description,\n                    moreInfo,\n                    optional,\n                    txName,\n                }) => {\n                    return this.updateStatus(\n                        \"creating addl Txn: \" + description,\n                        {\n                            moreInstructions: moreInfo,\n                            progressBar: \"waiting for wallet signature\",\n                            developerGuidance:\n                                \"to user: get this thing deployed, yo\",\n                        },\n                        `/// push ${description} txn to wallet`\n                    );\n                },\n                onSubmitted: ({ description, tcx }) => {\n                    return this.updateStatus(\n                        \"submitted txn: \" + description,\n                        {\n                            moreInstructions:\n                                \"the txn will take a few moments to be confirmed\",\n                            developerGuidance: \"it's just a user confirmation\",\n                        },\n                        \"/// txn submitted ok to network\"\n                    );\n                },\n            });\n            console.warn(\n                \"------------------- Boostrapped Config -----------------------\\n\",\n                tcx.state.bootstrappedConfig,\n                \"\\n------------------- deploy this! -----------------------\\n\",\n                \"... by pasting this into your dAPI repo's capo.config.json\"\n            );\n\n            if (\"development\" == process.env.NODE_ENV) {\n                window.localStorage.setItem(\n                    \"capoConfig\",\n                    JSON.stringify(tcx.state.bootstrappedConfig)\n                );\n                await this.updateStatus(\n                    \"Okay: self-deployed dev-time config.  It might take 10-20s for the charter to be found on-chain\",\n                    {\n                        keepOnscreen: true,\n                        moreInstructions:\n                            \"Bootstrap config saved to localStorage.  It will be used on next load.\",\n\n                        developerGuidance:\n                            \"dev-time 'deployment' to localStorage ready!\",\n                    },\n                    \"//stored bootstrapped config in localStorage\"\n                );\n                await new Promise((res) => setTimeout(res, 5000));\n            } else {\n                await this.updateStatus(\n                    `Capo contract creation submitted.  Use the details from the console to deploy this configuration.`,\n                    {\n                        keepOnscreen: true,\n                        moreInstructions:\n                            \"The charter transaction is submitted to the network.  It may take a few minutes to be confirmed.\",\n                        developerGuidance:\n                            \"Deploy the capo configuration by pasting these details into your dApp code, the build and deploy the dApp.\",\n                    },\n                    \"//ok: charter txn submitted to network\"\n                );\n            }\n\n            // this.seekConfirmation()\n        } catch (e: any) {\n            console.error(e);\n            this.updateStatus(\n                `while building bootstrap txn: \"${e.message}\"`,\n                {\n                    isError: true,\n                    nextAction: \"retryCreation\",\n                    developerGuidance:\n                        \"creating the capo didn't work for some reason.  Let the user try again.\",\n                },\n                \"//wallet error during charter\",\n                {\n                    capo: undefined,\n                }\n            );\n        }\n    }\n\n    /**\n     * sets the state to indicate an error condition and possible next steps\n     * @remarks\n     */\n    reportError(\n        e: Error,\n        prefix: string,\n        addlAttrs: UpdateStatusProps<UserActions>\n    ) {\n        console.error(e.stack || e.message);\n        debugger;\n        return this.updateStatus(\n            `${prefix}: \"${e.message}\"`,\n            {\n                isError: true,\n                keepOnscreen: true,\n                ...addlAttrs,\n            },\n            \"//error msg to user\"\n        );\n    }\n\n    /**\n     * Promise-based wrapper for setState, with status message implicit\n     * @remarks\n     *\n     * sets the status message in state.status, along with any other state props\n     *\n     * automatically clears nextAction, error, and actionLabels if they aren't\n     * explicitly set.\n     *\n     * returns an await-able promise for setting the indicated state\n     *\n     * TODO: Notifies state-change through the hooks inidicated in props\n     *\n     * @public\n     **/\n    updateStatus(\n        message: string | undefined,\n        statusProps: UpdateStatusProps<UserActions>,\n        extraComment: string,\n        extraState: UpdateStateProps = {}\n    ): Promise<any> {\n        const {\n            nextAction = undefined,\n            // moreInstructions = undefined,\n            // progressBar = undefined,\n            isError = undefined,\n            clearAfter = 0,\n            ready = this.state.status.ready,\n            ...otherStatusProps\n        } = statusProps;\n\n        // if (this._unmounted) {\n        //     console.warn(`suppressing state update after unmount (\\\"${status}\\\")`)\n        //     return\n        // }\n        if (!clearAfter) {\n            otherStatusProps.keepOnscreen = true;\n        }\n        console.log(`instance ${this.i}`, { status: message });\n        const status: CapoDappStatus<UserActions> =\n            \"undefined\" === typeof message\n                ? {\n                      message: undefined,\n                      developerGuidance:\n                          \"the current state was cleared, indicating no pending actions.  You MAY clear the most recent message.\",\n                  }\n                : {\n                      ...otherStatusProps,\n                      message,\n                      isError,\n                      ready,\n                      clearAfter,\n                      ...(nextAction\n                          ? {\n                                nextAction: {\n                                    key: nextAction,\n                                    label: this.userActions[nextAction]?.label,\n                                    trigger:\n                                        this.userActions[nextAction]?.trigger,\n                                },\n                            }\n                          : {}),\n                  };\n        const newState: CapoDappProviderState<CapoType> = {\n            ...this.state,\n            status: status,\n            ...extraState,\n        };\n        const doneWith =\n            (\"\" == message &&\n                this.state.status.message &&\n                `(done: ${this.state.status.message})`) ||\n            \"\";\n\n        console.warn(extraComment || \"\" + doneWith || \"\", {\n            newState,\n        });\n        return new Promise<void>((resolve) => {\n            this.setState(newState, resolve);\n            if (clearAfter) {\n                setTimeout(() => {\n                    if (this.state.status.message == message)\n                        this.updateStatus(\n                            \"\",\n                            {\n                                clearAfter: 0,\n                                developerGuidance:\n                                    \"clearing the message after the indicated time; if you have already used the previous clearAfter signal for a temporary message, it's ok to ignore this\",\n                            },\n                            \"//clear previous message\"\n                        );\n                }, clearAfter);\n            }\n        });\n    }\n\n    /**\n     * Defines activities that can be specified as nextAction: ‹key›,\n     * and offered to the user as a button to trigger the activity.\n     * @remarks\n     * Subclasses MAY override this method to provide additional actions\n     * and SHOULD include `{ ... super.userActions }`\n     */\n    get userActions(): UserActions {\n        return {\n            initializeCapo: {\n                label: \"Setup Capo\",\n                trigger: this.bootstrapCapo,\n            },\n            retryCreation: {\n                label: \"Retry\",\n                trigger: this.connectCapo,\n            },\n        } as BaseUserActionMap as UserActions;\n    }\n\n    /**\n     * emits an object allowing clients to access the provider's capabilities\n     * including including status updates, error-reporting and default UI\n     * elements\n     */\n    get capo(): CapoType | undefined {\n        return this.state.capo;\n    }\n}\n\n/**\n * Status info about the current user\n * @remarks\n * Indicates the user's current status and detected roles in the dApp.\n * @public\n */\nexport type DappUserInfo = {\n    selectedWallet?: string;\n    connectingWallet: boolean;\n    wallet?: Wallet;\n    walletHandle?: Cip30FullHandle;\n    walletAddress?: string;\n\n    memberUut?: UutName;\n    roles: (\"member\" | \"admin\")[];\n    foundNetworkName: string;\n};\n\n/**\n * @public\n */\nexport type UserAction = {\n    label: string;\n    trigger: () => void;\n};\n\n/**\n * @public\n */\nexport type BaseUserActionMap = {\n    initializeCapo: UserAction;\n    retryCreation: UserAction;\n};\n\n/**\n * @public\n */\nexport type UserActionMap<actions extends string> = Record<\n    actions,\n    UserAction\n> &\n    BaseUserActionMap;\n\n/**\n * @public\n */\nexport const CapoDappProviderContext =\n    React.createContext<CapoDAppProvider<any> | null>(null);\n\n/**\n * React hook for accessing the CapoDappProvider context.\n * @remarks\n * The context data now includes the capo instance as well as the provider.\n *\n * Indicate your Capo's type in the type parameter to access your Capo's methods and properties.\n * @typeParam C - the type of the capo instance\n * @public\n */\nexport function useCapoDappProvider<\n    C extends Capo<any, any> = Capo<any, any>\n>() {\n    const provider = React.useContext(\n        CapoDappProviderContext as React.Context<CapoDAppProvider<C> | null>\n    );\n    if (!provider) {\n        throw new Error(\n            \"useCapoDappProvider must be used within a CapoDappProvider\"\n        );\n    }\n    const [isMounted, setIsMounted] = React.useState(false);\n    const [capo, setCapo] = React.useState<C>();\n    const [checking, keepChecking] = React.useState(1);\n\n    React.useEffect(() => {\n        setIsMounted(true);\n        setTimeout(() => {\n            if (capo !== provider?.capo) {\n                setCapo(provider?.capo);\n            }\n            keepChecking(1 + checking);\n        }, 2000);\n    }, [checking, provider, provider?.userInfo.wallet, capo]);\n\n    return { capo, provider, isMounted };\n}\n\n/**\n * Status details emitted by the CapoDappProvider to indicate progress and current state\n * @remarks\n * status updates are emitted via the provider's onStatusChange callback,\n * and are intended to provide signals for the client UI to update its display\n * in response to user actions and other events, while keeping the client\n * in complete control of its presentation of the details.\n *\n * The CapoDappProvider can emit its own UI, using tailwind.css classes,\n * and this status object is intended as an alternative to that, allowing\n * complete customization of the UI.\n *\n * To customize some of the rendering while using the provider's built-in\n * rendering for other aspects, see the provider's `mkCapoSiteCtx()` method\n * and the helper methods it exposes.\n * @public\n */\nexport type CapoDappStatus<T extends UserActionMap<any> = BaseUserActionMap> = {\n    /**\n     * the current status message to display to the user\n     * @remarks\n     * to clear the status message, set status to an empty string.  The client MAY\n     * choose to continue displaying the last status message after it is cleared, for instance\n     * if it queues the message for automatic removal.\n     *\n     * If the prior message has keepOnscreen: true, the client can EXPECT that\n     * the message won't be cleared until some additional activity is initiated,\n     * typically by the user.\n     */\n    message: string | undefined;\n    /**\n     * Indicates that the dApp has loaded the user wallet and identified the user's roles.\n     */\n    ready?: boolean;\n\n    /**\n     * Indicates that the message SHOULD be left onscreen, and not automatically removed.\n     * @remarks\n     * if set, clearAfter will be undefined.\n     */\n    keepOnscreen?: true | undefined;\n    /**\n     * A hint for the client to clear the status message after a certain amount of time.\n     * @remarks\n     * The dApp provider will emit a new status with an empty message after the indicated\n     * time.  The client MAY choose to pass the clearAfter hint to a UI-notification library\n     * and let it handle the timing & presentation of message-removal; then it can ignore\n     * the empty-message update.\n     */\n    clearAfter?: number;\n    /**\n     * Indicates that the status message is an error message.  The client SHOULD display\n     * the message in a way indicating a problem the user may need to address.  dApps\n     * issuing such error indications SHOULD normally include a suggested nextAction\n     * to take, such as retrying the creation and/or submission of a transaction.\n     */\n    isError?: true;\n    /**\n     * Provides additional guidance, information or instructions for people using the dApp.\n     */\n    moreInstructions?: string;\n    /**\n     * Indicates a suggestied next activity for the dApp user to take in response to an error\n     * or other status message.\n     * @remarks\n     * If included, the client SHOULD display a button with the indicated label, and SHOULD\n     * call the indicated trigger when the button is clicked.  This trigger will initiate a dApp activity\n     * facilitating the next useful step for the user.  Typically this may be an administrative activity,\n     * but could also be used for end-user actions related to the dApp's day-to-day functionality,\n     * particularly those not needing any special UI.\n     *\n     * When there is a next action, the button and status message SHOULD be displayed\n     * in a way that makes it clear that the user should take the next action, typically by\n     * rendering the button and the status message within the same container.\n     */\n    nextAction?: {\n        /**\n         * a string identifier for a next action the user may take.  MAY include dApp-specific keys\n         */\n        key: string & keyof T;\n        /**\n         * the label to display on the button for the next action\n         */\n        label: string;\n        /**\n         * a function to call when the user clicks the button to take the next action\n         */\n        trigger: () => void;\n    };\n    /**\n     * Indicates that the dApp is currently performing an activity that may take some time to complete.\n     * @remarks\n     * If the progressBar attribute is provided (truthy), the client SHOULD display an indicator\n     * that an activity is pending.  If the value is a string, the client SHOULD display the string\n     * as a label for the progress indicator.\n     *\n     * If the progressPercent attribute is provided, the client SHOULD expect incremental updates with\n     * new progressPercent values and the same `message` attribute.  dApps providing progressPercent\n     * updates SHOULD include a 100%-completion update when their activity is finished.\n     *\n     * dApps SHOULD try to include incremental updates (e.g. in moreInstructions) at least every 5-10 seconds\n     * to keep the user's trust during activities that may take time to be completed or confirmed.\n     *\n     * For long-running activities taking more than 30s, the completion message SHOULD be\n     * left onscreen, not automatically cleared.\n     */\n    progressBar?: true | string | undefined;\n    /**\n     * A percentage value indicating the progress of a long-running activity, when avaialble.\n     * @remarks\n     * Activities not having any numeric information about progress SHOULD NOT include this attribute.\n     * Instead, they MAY wish to indicate some expectations in `moreInstructions` to help the user\n     * know what to expect.\n     */\n    progressPercent?: number | undefined;\n    /**\n     * When multiple transactions are needed to complete an activity, the pendingTxns attribute\n     * provides names, descriptions and more information about those transactions.  The UI MAY\n     * display this summary information onscreen to guide the user's understanding of the various steps.\n     *\n     * Note that pending transactions may be abstract, in the sense that the actual built transaction\n     * may not be present when presented in this list.  The client SHOULD limit its display of pendingTxns\n     * to the summary information provided.\n     *\n     * NOTE: The transaction-submission API contains a callback for `beforeSubmit(txn)` that should be used\n     * separately from this status-indicator to show further transaction details if needed at the time of\n     * submitting a built transaction to the wallet for signing.\n     */\n    pendingTxns?: TxDescription<any, \"resolved\">[];\n    /**\n     * A transaction may trigger additional transactions, and those transactions may further trigger\n     * a queue of transactions.  In this case, the nextPendingQueue collects a list of transactions\n     * triggered by the transactions seen in `pendingTxns`.  All the `pendingTxns` will be processed\n     * before any of the transactions from the `nextPendingQueue`.  Once all the transactions in the\n     * `pendingTxns` list are completed, the `pendingTxns` will be replaced with the transactions\n     * from the `nextPendingQueue`, and the `nextPendingQueue` will be cleared.\n     */\n    nextPendingQueue?: TxDescription<any, any>[];\n    progressResult?: string;\n    /**\n     * the dev guidance SHOULD NOT be displayed in-app.  When included,\n     * it provides a hint to developers about how to handle current status, prompt, error, etc.\n     * dev guidance is not always included\n     */\n    developerGuidance: string | undefined;\n\n    /**\n     * Indicates that the dApp is busy doing something.  Client developers are encouraged to indicate\n     * the busy state in a way indicating there is something going on, without discouraging the user from\n     * doing anything else like navigating to a different page.\n     */\n    busy?: true;\n};\n","import * as React from \"react\";\nimport { makeShelleyAddress } from \"@helios-lang/ledger\";\nimport {\n    DashHighlightItem,\n    Highlight,\n    Lowlight,\n    Softlight,\n    DashboardTemplate,\n    DashboardRow,\n    DashboardSummary,\n    DashSummaryItem,\n    DashboardHighlights,\n} from \"./DashboardTemplate.js\";\nimport {\n    abbrevAddress,\n    type CharterData,\n    type Capo,\n    type DelegateSetup,\n    type hasAddlTxns,\n    type StellarTxnContext,\n    type BatchSubmitController,\n    type ErgoCapoManifestEntry,\n    type RelativeDelegateLink,\n    bytesToText,\n    uplcDataSerializer,\n    BasicMintDelegate,\n    StellarDelegate,\n    DelegatedDataContract,\n} from \"@donecollectively/stellar-contracts\";\nimport { useCapoDappProvider } from \"./CapoDappProvider.js\";\nimport { TxBatchViewer } from \"./TxBatchViewer.js\";\n\n/**\n * Shows a Capo-based dApp's charter status as a dashboard-style screen\n * @public\n */\nexport function CharterStatus() {\n    const { capo, provider, isMounted } = useCapoDappProvider();\n    const blockfrost = provider?.bf;\n\n    const [charterData, setCharterData] = React.useState<CharterData>();\n    const [statusMessage, setStatusMessage] = React.useState(\"\");\n\n    React.useEffect(() => {\n        if (!provider?.userInfo?.wallet) {\n            setStatusMessage(\"no user info\");\n            return;\n        }\n        if (!provider) {\n            setStatusMessage(\"no provider\");\n            return;\n        }\n\n        // @ts-ignore - This is a temporary global variable for debugging\n        globalThis.capo = capo;\n        setStatusMessage(\"finding charter data...\");\n        if (!capo) return;\n        capo.getBundle().then((bundle) => {\n            if (!bundle) {\n                setStatusMessage(\"no bundle\");\n                return;\n            }\n            if (!bundle._progIsPrecompiled) {\n                setStatusMessage(\"Capo bundle not configured\");\n                return;\n            }\n            const configured = bundle.configuredParams;\n            const { isChartered } = capo;\n\n            if (!configured || !isChartered) {\n                const problem = configured\n                    ? isChartered\n                        ? \"impossible\"\n                        : \"is preconfigured and ready to be chartered!\"\n                    : isChartered\n                    ? \"impossible\"\n                    : \"needs to be configured and chartered.   Add a configuration if you have it, or create the Capo charter now.\";\n\n                const message = `The Capo contract ${problem} `;\n\n                setStatusMessage(message);\n            }\n        });\n        if (capo && capo.isChartered) {\n            capo?.findCharterData(undefined, { optional: true }).then((cd) => {\n                if (!cd) {\n                    setStatusMessage(\"no charter data found\");\n                    return;\n                }\n                setStatusMessage(\"charter data found\");\n                // @ts-ignore - This is a temporary global variable for debugging\n                globalThis.charter = cd;\n\n                setCharterData(cd);\n            });\n        }\n    }, [provider, provider?.userInfo.wallet, capo]);\n\n    const [upgradeTxn, setUpgradeTxn] = React.useState<\n        hasAddlTxns<StellarTxnContext> | \"ok\" | undefined\n    >();\n    React.useEffect(\n        function checkForNeededUpgrades() {\n            if (!capo) return;\n            if (!charterData) return;\n\n            capo.verifyCoreDelegates().then(() => {\n                capo.mkTxnUpgradeIfNeeded()\n                    .catch((e) => {\n                        setStatusMessage(\"error: \" + e.message);\n                        debugger;\n                    })\n                    .then((tcx) => {\n                        if (!tcx) {\n                            setStatusMessage(\"no upgrade needed\");\n                            return;\n                        }\n                        if (Object.keys(tcx.addlTxns).length) {\n                            setUpgradeTxn(\n                                tcx as hasAddlTxns<StellarTxnContext>\n                            );\n                        } else {\n                            setUpgradeTxn(\"ok\");\n                            setStatusMessage(\"no upgrade needed\");\n                        }\n                    });\n            });\n        },\n        [charterData]\n    );\n\n    // const [currentBatch, setTxBatch] = React.useState<BatchSubmitController>();\n    // const [initialId, setInitialId] = React.useState<string | undefined>(\n    //     undefined\n    // );\n    // React.useEffect(\n    //     function monitorTxBatcher() {\n    //         if (!capo) return;\n    //         const { txBatcher } = capo.setup;\n\n    //         txBatcher.$notifier.on(\"rotated\", (batch) => {\n    //             console.log(\"batch rotated\", batch);\n    //             const txns = batch.$allTxns;\n    //             if (txns.length) {\n    //                 setInitialId(txns[0].id);\n    //             } else {\n    //                 batch.$txChanges.once(\"txAdded\", (txTracker) => {\n    //                     console.log(\"tx added\", txTracker);\n    //                     const { id } = txTracker;\n    //                     setInitialId(id);\n    //                 });\n    //             }\n    //             setTxBatch(batch);\n    //         });\n    //     },\n    //     [capo, capo?.setup.txBatcher]\n    // );\n\n    const loadUpgrades = React.useMemo(() => {\n        return async function loadUpgradeTxns() {\n            if (!capo) return;\n            if (!upgradeTxn) return;\n            if (\"ok\" === upgradeTxn) return;\n            const { txBatcher } = capo.setup;\n\n            txBatcher!.current.$addTxns([\n                {\n                    description: \"Upgrade Charter\",\n                    tcx: upgradeTxn,\n                    id: upgradeTxn.id,\n                    depth: 0,\n                    moreInfo:\n                        \"Applies needed updates to on-chain deployment details\",\n                },\n            ]);\n            // setInitialId(Object.values(upgradeTxn.addlTxns)[0].id);\n\n            upgradeTxn.buildAndQueueAll({});\n        };\n    }, [capo, capo?.setup.txBatcher, upgradeTxn]);\n\n    if (!isMounted) {\n        return null;\n    }\n\n    let upgradeInfo = <></>;\n    if (upgradeTxn === \"ok\") {\n        upgradeInfo = (\n            <DashHighlightItem title=\"Deployment\">\n                <br />\n                <Lowlight>Everything is up to date</Lowlight>\n            </DashHighlightItem>\n        );\n    } else if (upgradeTxn) {\n        const txnCount = Object.keys(upgradeTxn.addlTxns).length;\n        const txns = txnCount === 1 ? \"tx\" : \"txns\";\n        upgradeInfo = (\n            <DashHighlightItem button=\"Review & Submit\" onClick={loadUpgrades}>\n                <Highlight>\n                    {txnCount}{\" \"}\n                    <Lowlight as=\"span\" className=\"text-lg\">\n                        {txns} needed\n                    </Lowlight>\n                </Highlight>\n                <Softlight className=\"italic\">\n                    To bring the on-chain deployment up to date\n                </Softlight>\n            </DashHighlightItem>\n        );\n    }\n\n    let highlights: React.ReactNode | null = null;\n    if (capo && !capo.isChartered) {\n        highlights = (\n            <DashboardHighlights title=\"Highlights\">\n                <DashHighlightItem\n                    title=\"Needs Charter\"\n                    footer=\"The Capo has not been created yet\"\n                >\n                    <Highlight>Setup the Capo to resolve</Highlight>\n                </DashHighlightItem>\n            </DashboardHighlights>\n        );\n    } else if (charterData) {\n        highlights = (\n            <DashboardHighlights\n                title=\"Highlights\"\n                footer={\n                    <>\n                        Capo:{\" \"}\n                        <Softlight as=\"span\">\n                            {capo?.address?.toString()}\n                        </Softlight>\n                        <div>\n                            Minting policy:{\" \"}\n                            <Softlight as=\"span\">\n                                {capo?.mintingPolicyHash?.toString()}\n                            </Softlight>\n                        </div>\n                    </>\n                }\n            >\n                {capo && charterData && (\n                    <CharterHighlights capo={capo} charterData={charterData} />\n                )}\n                {upgradeInfo}\n            </DashboardHighlights>\n        );\n    }\n\n    return (\n        <>\n            <DashboardTemplate title=\"Charter\">\n                <div>\n                    {provider?.dAppName}: {statusMessage}\n                </div>\n                <DashboardRow>\n                    <DashboardSummary title=\"Stats\">\n                        <DashSummaryItem title=\"Node Operators\">\n                            42\n                        </DashSummaryItem>\n                        <DashSummaryItem title=\"Active Stake\">\n                            14,200\n                            <Highlight>ADA</Highlight>\n                        </DashSummaryItem>\n                        <DashSummaryItem title=\"Great Things\">\n                            1042\n                        </DashSummaryItem>\n                    </DashboardSummary>\n                    {highlights}\n                </DashboardRow>\n            </DashboardTemplate>\n            {(charterData && (\n                <code className=\"text-sm\">\n                    <pre>{uplcDataSerializer(\"\", charterData)}</pre>\n                </code>\n            )) || <pre>loading charter data...</pre>}\n        </>\n    );\n}\n\n/**\n * Shows a highlights of various contract elements within a Capo-based dApp\n * @remarks\n * Includes mint and spend delegates, delegated data policies, and named manifest entries\n * @public\n */\nexport function CharterHighlights({\n    capo,\n    charterData,\n}: {\n    capo: Capo<any, any>;\n    charterData: CharterData;\n}) {\n    const isMainnet = capo.setup.isMainnet;\n    const [{ mintDgt, spendDgt }, setDelegates] = React.useState<{\n        mintDgt: BasicMintDelegate | undefined | null;\n        spendDgt: BasicMintDelegate | undefined | null;\n    }>({\n        mintDgt: undefined,\n        spendDgt: undefined,\n    });\n    const [dataControllers, setDataControllers] = React.useState<{\n        [key: string]: DelegatedDataContract<any, any>;\n    }>({});\n    React.useEffect(() => {\n        async function loadDelegates() {\n            const mintDgt = (await capo.getMintDelegate(charterData)) || null;\n            const spendDgt = (await capo.getSpendDelegate(charterData)) || null;\n            setDelegates({ mintDgt, spendDgt });\n\n            const dataControllers = {};\n            for (const [entryName, entryInfo] of [\n                ...charterData.manifest.entries(),\n            ]) {\n                if (entryInfo.entryType.DgDataPolicy) {\n                    const dgt = await capo.getDgDataController(entryName, {\n                        charterData,\n                    });\n                    await dgt?.getBundle();\n                    dataControllers[entryName] = dgt;\n                }\n            }\n            setDataControllers(dataControllers);\n        }\n        loadDelegates();\n    }, [capo, charterData]);\n\n    const { mintDelegateLink } = charterData;\n    const { spendDelegateLink } = charterData;\n\n    // const mintDgtAddr = mintDelegateLink?.delegateValidatorHash\n    //     ? makeShelleyAddress(isMainnet, mintDelegateLink.delegateValidatorHash)\n    //     : undefined\n    // const spendDgtAddr = spendDelegateLink?.delegateValidatorHash\n    //     ? makeShelleyAddress(isMainnet, spendDelegateLink.delegateValidatorHash)\n    //     : undefined\n\n    if (!charterData) return null;\n    // debugger\n\n    const manifestNamedEntries = [...charterData.manifest.entries()]\n        .filter(([_, foundRole]) => !foundRole.entryType.DgDataPolicy)\n        .map(([roleName, foundRole]: [string, ErgoCapoManifestEntry]) => {\n            const entryType = Object.keys(foundRole.entryType)[0];\n            // debugger\n\n            return (\n                <DashHighlightItem\n                    key={`role-${roleName}`}\n                    title={roleName}\n                    footer={`manifest '${entryType}' entry`}\n                >\n                    <Softlight>{bytesToText(foundRole.tokenName)}</Softlight>\n                </DashHighlightItem>\n            );\n        });\n\n    const coreDelegates = (() => {\n        if (!mintDgt) return null;\n        if (!spendDgt) return null;\n        return (\n            <>\n                <CoreDelegateHighlightItem\n                    title=\"Mint Delegate\"\n                    delegate={mintDgt}\n                    delegateLink={mintDelegateLink}\n                    isMainnet={isMainnet}\n                    footer=\"governs all token minting\"\n                />\n\n                <CoreDelegateHighlightItem\n                    title=\"Spend Delegate\"\n                    delegate={spendDgt}\n                    delegateLink={spendDelegateLink}\n                    isMainnet={isMainnet}\n                    footer=\"controls admin &amp; redelegation\"\n                />\n            </>\n        );\n    })();\n\n    return (\n        <>\n            {coreDelegates}\n            {manifestNamedEntries}\n\n            {...Object.entries(capo.delegateRoles).flatMap(\n                ([roleName, roleInfo]: [\n                    string,\n                    DelegateSetup<any, StellarDelegate, any>\n                ]) => {\n                    if (roleName == \"govAuthority\") return null;\n                    if (roleName == \"mintDelegate\") return null;\n                    if (roleName == \"spendDelegate\") return null;\n\n                    const foundRole = charterData.manifest.get(roleName);\n                    if (!foundRole)\n                        return (\n                            <DashHighlightItem\n                                title={roleName}\n                                key={`mftRole-${roleName}`}\n                            >\n                                <Softlight>Delegated data policy</Softlight>\n                                <Highlight>needs deployment</Highlight>\n                            </DashHighlightItem>\n                        );\n                    return (\n                        <DelegatedDataPolicyItem\n                            roleName={roleName}\n                            delegate={dataControllers[roleName]}\n                            mainnet={isMainnet}\n                            foundRole={foundRole}\n                        />\n                    );\n                }\n            )}\n        </>\n    );\n}\n\nfunction DelegatedDataPolicyItem({\n    roleName,\n    delegate,\n    mainnet,\n    foundRole,\n}: {\n    roleName: string;\n    delegate: DelegatedDataContract<any, any>;\n    mainnet: boolean;\n    foundRole: ErgoCapoManifestEntry;\n}) {\n    return (\n        <DashHighlightItem\n            title={roleName}\n            footer={\n                <>\n                    Governs all{\" \"}\n                    <Lowlight as=\"span\">\n                        <b>{delegate?.recordTypeName}</b>\n                    </Lowlight>{\" \"}\n                    records\n                </>\n            }\n        >\n            <div className=\"flex flex-row justify-between w-full\">\n                <div>\n                    <Softlight>\n                        Delegated data policy\n                        <div className=\"text-xs\">\n                            &nbsp;&nbsp;&nbsp;\n                            {bytesToText(foundRole.tokenName)}\n                        </div>\n                    </Softlight>\n                </div>\n                <div className=\"flex flex-col items-end\">\n                    <Lowlight className=\"text-xs\">for type</Lowlight>\n                    <Highlight as=\"span\" className=\"whitespace-nowrap\">\n                        {foundRole.entryType.DgDataPolicy?.idPrefix}-*\n                    </Highlight>\n                </div>\n            </div>\n            {delegate?.preloadedBundle.previousOnchainScript ? (\n                <div className=\"text-xs mt-2 w-full text-right\">\n                    <Highlight as=\"span\">update needed </Highlight>\n                    <Softlight className=\"italic\">\n                        to apply pending code changes to on-chain policy\n                    </Softlight>\n                </div>\n            ) : (\n                \"\"\n            )}\n        </DashHighlightItem>\n    );\n}\n\nfunction CoreDelegateHighlightItem({\n    title,\n    delegate,\n    delegateLink,\n    isMainnet,\n    footer,\n}: {\n    title: string;\n    delegate?: BasicMintDelegate;\n    delegateLink?: RelativeDelegateLink;\n    isMainnet: boolean;\n    footer?: string;\n}) {\n    if (!delegateLink) {\n        return (\n            <DashHighlightItem title={title}>\n                <Highlight>needs deployment</Highlight>\n            </DashHighlightItem>\n        );\n    }\n    const dvh = delegateLink.delegateValidatorHash;\n    const addr = dvh ? abbrevAddress(makeShelleyAddress(isMainnet, dvh)) : \"\";\n    // if (delegate) debugger\n    return (\n        <DashHighlightItem title={title} footer={footer}>\n            <Softlight>{delegateLink?.uutName}</Softlight>\n            <Lowlight className=\"text-right\">{addr}</Lowlight>\n\n            {delegate?.preloadedBundle.previousOnchainScript ? (\n                <Highlight className=\"text-right\">\n                    update needed{\" \"}\n                    <Softlight>to apply changes to on-chain policy</Softlight>\n                </Highlight>\n            ) : null}\n        </DashHighlightItem>\n    );\n}\n","import type { TxDescription } from \"@donecollectively/stellar-contracts\";\nimport { TxSubmitMgr } from \"@donecollectively/stellar-contracts\";\nimport * as React from \"react\";\nimport {\n    DashboardRow,\n    DashboardHighlights,\n    DashHighlightItem,\n    Highlight,\n    Lowlight,\n    Softlight,\n} from \"./DashboardTemplate.js\";\n\n/**\n * @public\n */\nexport type PendingTxn = {\n    txd: TxDescription<any, any>;\n    statusSummary: string;\n    mgr?: TxSubmitMgr;\n};\n\n/**\n * @deprecated - the CharterStatus component is now preferred\n * @public\n */\nexport function ShowPendingTxns({\n    pendingTxns,\n}: {\n    pendingTxns: Map<string, PendingTxn>;\n}) {\n    const [isMounted, setIsMounted] = React.useState(false);\n    React.useEffect(() => {\n        setIsMounted(true);\n    }, []);\n    if (!isMounted) {\n        return null;\n    }\n    return (\n        <DashboardRow>\n            <DashboardHighlights title=\"Pending Txns\">\n                {...Array.from(pendingTxns.values()).map(\n                    ({ mgr, statusSummary, txd }) => (\n                        <DashHighlightItem\n                            key={txd.id}\n                            title={txd.txName || txd.description}\n                        >\n                            {statusSummary}\n                            {mgr?.pending?.activity}\n                        </DashHighlightItem>\n                    )\n                )}\n            </DashboardHighlights>\n        </DashboardRow>\n    );\n}\n","import * as React from \"react\";\n\n/**\n * @deprecated - probably not needed anymore\n * @public\n */\nexport function ShowFailedActivity(\n    {\n        failed, failure: { message, code, data, ...otherFailInfo } = {} as any, ...results\n    }: OgmiosEvalFailure = {} as any) {\n\n    const [isMounted, setIsMounted] = React.useState(false);\n    React.useEffect(() => {\n        setIsMounted(true);\n    }, []);\n    if (!isMounted) {\n        return null;\n    }\n    if (Object.keys(otherFailInfo).length === 0) {\n        otherFailInfo = undefined as any;\n    }\n    if (!failed || !message) {\n        return (\n            <code>\n                <pre>\n                    {failed && (\n                        <>\n                            failed: {failed}\n                            <br />\n                        </>\n                    )}\n                    {message && (\n                        <>\n                            message: {message}\n                            <br />\n                        </>\n                    )}\n                    {JSON.stringify({ otherFailInfo, ...results }, null, 2)}\n                    <br />\n                </pre>\n            </code>\n        );\n    }\n    const moreDetail = Array.isArray(data) && !!data[0].validator ? (\n        <div>\n            {data.map(({ validator, error, ...others }) => {\n                const { index, purpose } = validator;\n                const {\n                    code: errorCode, message: errorMessage, data: { validationError, traces = [], ...otherData } = {},\n                } = error;\n\n                return (\n                    <div key={index}>\n                        <h4>\n                            Validator {index} ({purpose}): {errorMessage}\n                            <pre>{JSON.stringify(others, null, 2)}</pre>\n                        </h4>\n                        <hr />\n                        <div className=\"ml-8 bl-2 b-slate bl-2\">\n                            <code>\n                                <pre>{traces.join(\"\\n\")}</pre>\n                            </code>\n                            <hr />\n                            <pre>otherData: {JSON.stringify(otherData, null, 2)}</pre>\n                        </div>\n                    </div>\n                );\n            })}\n        </div>\n    ) : (\n        <code>\n            <pre>{JSON.stringify(data, null, 2)}</pre>\n        </code>\n    );\n\n    return (\n        <div>\n            Activity failed: {failed} <br />\n            Message: {message} <br />\n            {moreDetail}\n        </div>\n    );\n}\n\n/**\n * @public\n */\nexport type OgmiosEvalFailure = {\n    failed: string\n    failure: {\n        message: string\n        code: number\n        data: any\n    }\n}\n// Example data:\nconst exampleData = {\n    failed: \"evaluate\",\n    failure: {\n        message: \"Some scripts of the transactions terminated with error(s).\",\n        code: 3010,\n        data: [\n            {\n                validator: {\n                    index: 0,\n                    purpose: \"mint\",\n                },\n                error: {\n                    code: 3012,\n                    message: \"Some of the scripts failed to evaluate to a positive outcome. The field 'data.validationError' informs about the nature of the error, and 'data.traces' lists all the execution traces collected during the script execution.\",\n                    data: {\n                        validationError: \"An error has occurred:\\nThe machine terminated because of an error, either from a built-in function or from an explicit use of 'error'.\",\n                        traces: [\n                            \"cm1\",\n                            \" 🚥❓ Capo minter\",\n                            \" -- minter policy id: 160b62cc1aa98de8c818aa553e76dd1596f5d2800f9d9f958b8ef20e\",\n                            \"cm2\",\n                            \" -- creating Capo charter\",\n                            \"❗ must mint the charter token\",\n                            \"❗ verifies that the provided seed utxo is being spent, providing uniqueness assurances for the minting-script's seed parameters\",\n                            \" -- has seed -> ok\\n\",\n                            \"cm3\",\n                            \"validateUutMinting\",\n                            \"❗ must mint uuts for mintDgt, spendDgt, and govAuth using the same seed\",\n                            \" ℹ️ 🐞 expected: 1x charter\",\n                            \" ℹ️ 🐞 expected: 1x capoGov-0458e5880117\",\n                            \" ℹ️ 🐞 expected: 1x mintDgt-0458e5880117\",\n                            \" ℹ️ 🐞 expected: 1x spendDgt-0458e5880117\",\n                            \" ℹ️ 🐞 actual: 1x capoGov-0458e5880117\",\n                            \" ℹ️ 🐞 actual: 1x charter\",\n                            \" ℹ️ 🐞 actual: 1x mintDgt-0458e5880117\",\n                            \" ℹ️ 🐞 actual: 1x spendDgt-0458e5880117\",\n                            \"other policy values minted: \\n\",\n                            \"lovelace: 0\\n\",\n                            \"❗ Ensures the mint for this policy-id is exactly the expected value\",\n                            \"mismatch in UUT mint\",\n                        ],\n                    },\n                },\n            },\n        ],\n        id: {},\n    },\n}\n\n"],"names":["React","ellipse","tx","capo","config","tcx","mintDgt","spendDgt","dataControllers"],"mappings":"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"}